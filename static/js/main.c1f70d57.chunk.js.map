{"version":3,"sources":["components/minesweeper/minesweeper.utils.ts","models/CellModel.ts","utils/utils.ts","models/BoardModel.ts","components/cell/cell.config.ts","components/cell/cell.style.ts","components/cell/cell.component.tsx","components/board/baoard.component.tsx","components/minesweeper/topbar/topbar.style.ts","components/minesweeper/topbar/topbar.component.tsx","components/minesweeper/messagebox/message.style.ts","components/minesweeper/messagebox/message.component.tsx","components/minesweeper/minesweeper.component.tsx","App.tsx","index.tsx"],"names":["GameStatus","CellModel","x","y","hasMine","isRevealed","hasFlag","proximity","this","NEIGHBOURS","BoardModel","rows","columns","nMines","field","minesCoordinates","buildBoard","min","max","Math","floor","random","row","col","c","checkLimits","counter","_getRandomCoordinate","cell","push","_defineMineProximity","_placeMines","reveal","LEVELS","EASY","difficulty","mines","MEDIUM","HARD","COLORS","CAMP_COLORS","styled","div","props","color","bg","mineColor","memo","onLeftClick","onRightClick","CAMP_COLORS_PAIR","getCampColorsPair","round","length","onClick","onContextMenu","e","preventDefault","icon","faFlag","id","faBomb","Board","showAndExpand","toggleFlag","map","style","display","StyledTopbar","section","GameTopbar","nFlags","reset","StyledMessageContainer","MessageBox","state","message","GAMEOVER","VICTORY","Minesweeper","useState","status","INPROGRESS","board","gameState","setGameState","cellLeft","setCellLeft","setNFlags","useEffect","prev","resetGame","position","showAllMines","r","App","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c1f70d57.chunk.js","sourcesContent":["export enum GameStatus {\r\n  INPROGRESS,\r\n  GAMEOVER,\r\n  VICTORY,\r\n}\r\n\r\ntype Level = {\r\n  difficulty: string;\r\n  rows: number;\r\n  columns: number;\r\n  mines: number;\r\n};\r\n\r\nexport const LEVELS: { [key: string]: Level } = {\r\n  EASY: {\r\n    difficulty: \"EASY\",\r\n    rows: 10,\r\n    columns: 10,\r\n    mines: 15,\r\n  },\r\n  MEDIUM: {\r\n    difficulty: \"MEDIUM\",\r\n    rows: 15,\r\n    columns: 15,\r\n    mines: 35,\r\n  },\r\n  HARD: {\r\n    difficulty: \"HARD\",\r\n    rows: 15,\r\n    columns: 20,\r\n    mines: 50,\r\n  },\r\n};\r\n","export class CellModel {\r\n  constructor(\r\n    public x: number,\r\n    public y: number,\r\n    public hasMine: boolean = false,\r\n    public isRevealed: boolean = false,\r\n    public hasFlag: boolean = false,\r\n    public proximity: number = 0\r\n  ) {}\r\n\r\n  reveal() {\r\n    this.isRevealed = true;\r\n  }\r\n\r\n  toggleFlag() {\r\n    this.hasFlag = !this.hasFlag;\r\n  }\r\n}\r\n","export type Coords = [x: number, y: number];\r\n\r\nexport const NEIGHBOURS: Coords[] = [\r\n  [-1, -1],\r\n  [0, -1],\r\n  [1, -1],\r\n  [-1, 0],\r\n  [1, 0],\r\n  [-1, 1],\r\n  [0, 1],\r\n  [1, 1],\r\n];\r\n","import { CellModel } from \"./CellModel\";\r\nimport {Coords, NEIGHBOURS} from '../utils/utils';\r\n\r\nexport class BoardModel {\r\n  constructor(\r\n    private rows: number,\r\n    private columns: number,\r\n    private nMines: number,\r\n    public field: CellModel[][] = [],\r\n    private minesCoordinates: Coords[] = []\r\n  ) {\r\n    this.buildBoard();\r\n  }\r\n\r\n  private _getRandomCoordinate(min: number, max: number) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n  }\r\n\r\n  checkLimits(row: number, col: number): boolean {\r\n    return (\r\n      row >= 0 && row <= this.rows - 1 && col >= 0 && col <= this.columns - 1\r\n    );\r\n  }\r\n\r\n  private _defineMineProximity(): void {\r\n    for (let [x, y] of this.minesCoordinates) {\r\n      for (let [c, r] of NEIGHBOURS) {\r\n        const row = y + r;\r\n        const col = x + c;\r\n\r\n        if (this.checkLimits(row, col) && !this.field[row][col].hasMine) {\r\n          this.field[row][col].proximity++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _placeMines(): void {\r\n    let counter = 0;\r\n\r\n    while (counter < this.nMines) {\r\n      let [x, y]: Coords = [\r\n        this._getRandomCoordinate(0, this.columns - 1),\r\n        this._getRandomCoordinate(0, this.rows - 1),\r\n      ];\r\n\r\n      let cell = this.field[y][x];\r\n      if (!cell.hasMine) {\r\n        cell.hasMine = true;\r\n        counter++;\r\n        this.minesCoordinates.push([x, y]);\r\n      }\r\n    }\r\n    this._defineMineProximity();\r\n  }\r\n\r\n  buildBoard() {\r\n    this.field = [];\r\n    for (let y = 0; y < this.rows; y++) {\r\n      this.field.push([]);\r\n      for (let x = 0; x < this.columns; x++)\r\n        this.field[y].push(new CellModel(x, y));\r\n    }\r\n    this._placeMines();\r\n  }\r\n\r\n  showAllMines() {\r\n    for (let [x, y] of this.minesCoordinates) {\r\n      let cell = this.field[y][x];\r\n      cell.reveal();\r\n    }\r\n  }\r\n}\r\n","export const COLORS = [\r\n  \"#2d2fa3\",\r\n  \"rgb(57, 128, 25)\",\r\n  \"rgb(211, 76, 22)\",\r\n  \"rgb(204, 19, 19)\",\r\n  \"rgb(156, 6, 56)\",\r\n];\r\n\r\nexport const CAMP_COLORS = {\r\n  LIGHTGREEN: \"rgb(170, 219, 124)\",\r\n  DARKGREEN: \"rgb(133, 201, 130)\",\r\n  LIGHTBROWN: \"rgb(180, 156, 125)\",\r\n  DARKBROWN: \"rgb(156, 138, 115)\",\r\n};\r\n\r\nexport const getCampColorsPair = (isRevealed: boolean): string[] => {\r\n  return isRevealed\r\n    ? [CAMP_COLORS.LIGHTBROWN, CAMP_COLORS.DARKBROWN]\r\n    : [CAMP_COLORS.LIGHTGREEN, CAMP_COLORS.DARKGREEN];\r\n};\r\n","import styled from \"styled-components\";\r\n\r\ntype StyledCellProp = {\r\n  bg: string;\r\n  color: string;\r\n  mineColor: string;\r\n  isRevealed: boolean;\r\n};\r\n\r\nexport default styled.div<StyledCellProp>`\r\n  width: 35px;\r\n  height: 35px;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: ${(props) => props.color};\r\n  background-color: ${(props) => props.bg};\r\n  > svg#flag {\r\n    color: rgb(204, 19, 19);\r\n  }\r\n  > svg {\r\n    color: ${(props) => props.mineColor};\r\n    font-size: 1.2rem;\r\n  }\r\n  ::after {\r\n    content: \"\";\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n  }\r\n  :hover::after {\r\n    background-color: ${(props) =>\r\n      !props.isRevealed && \"rgba(255, 255, 255, 0.253)\"};\r\n  }\r\n`;\r\n","import React, { memo } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFlag, faBomb } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { COLORS, getCampColorsPair } from \"./cell.config\";\r\nimport StyledCell from \"./cell.style\";\r\n\r\ntype CellProps = {\r\n  x: number;\r\n  y: number;\r\n  isRevealed: boolean;\r\n  hasFlag: boolean;\r\n  hasMine: boolean;\r\n  proximity: number;\r\n  onLeftClick: (row: number, column: number) => void;\r\n  onRightClick: (row: number, column: number) => void;\r\n};\r\n\r\nexport default memo(function Cell({\r\n  x,\r\n  y,\r\n  isRevealed,\r\n  hasFlag,\r\n  hasMine,\r\n  proximity,\r\n  onLeftClick,\r\n  onRightClick,\r\n}: CellProps) {\r\n  const bg = (() => {\r\n    const CAMP_COLORS_PAIR = getCampColorsPair(isRevealed);\r\n    let bg: string;\r\n    if (y % 2 === 0)\r\n      bg = x % 2 === 0 ? CAMP_COLORS_PAIR[0] : CAMP_COLORS_PAIR[1];\r\n    else bg = x % 2 === 0 ? CAMP_COLORS_PAIR[1] : CAMP_COLORS_PAIR[0];\r\n    return bg;\r\n  })();\r\n\r\n  const mineColor = COLORS[Math.round(Math.random() * COLORS.length)];\r\n\r\n  const handleLeftClick = () => {\r\n    onLeftClick(y, x);\r\n  };\r\n\r\n  const handleRightClick = (\r\n    e: React.MouseEvent<HTMLDivElement, MouseEvent>\r\n  ) => {\r\n    e.preventDefault();\r\n    onRightClick(y, x);\r\n  };\r\n\r\n  return (\r\n    <StyledCell\r\n      bg={bg}\r\n      color={COLORS[proximity]}\r\n      mineColor={mineColor}\r\n      isRevealed={isRevealed}\r\n      onClick={handleLeftClick}\r\n      onContextMenu={handleRightClick}\r\n    >\r\n      {hasFlag && !isRevealed && <FontAwesomeIcon icon={faFlag} id=\"flag\" />}\r\n      {hasMine && isRevealed && <FontAwesomeIcon icon={faBomb} />}\r\n      {isRevealed && proximity > 0 && <p>{proximity}</p>}\r\n    </StyledCell>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport Cell from \"../cell/cell.component\";\r\nimport { CellModel } from \"../../models/CellModel\";\r\n\r\ntype BoardProps = {\r\n  field: CellModel[][];\r\n  showAndExpand: (row: number, column: number) => void;\r\n  toggleFlag: (row: number, column: number) => void;\r\n};\r\n\r\nexport default function Board({\r\n  field,\r\n  showAndExpand,\r\n  toggleFlag,\r\n}: BoardProps) {\r\n  return (\r\n    <div>\r\n      {field.map((row, y) => (\r\n        <div key={`row-${y}`} style={{ display: \"flex\" }}>\r\n          {row.map((cell, x) => (\r\n            <Cell\r\n              key={`col-${x}`}\r\n              {...cell}\r\n              onLeftClick={showAndExpand}\r\n              onRightClick={toggleFlag}\r\n            />\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledTopbar = styled.section`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  text-transform: uppercase;\r\n  font-weight: 600;\r\n  margin-bottom: 10px;\r\n  color: rgb(133, 201, 130);\r\n  svg#flag {\r\n    color: rgb(204, 19, 19);\r\n  }\r\n  > #restart:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { StyledTopbar } from \"./topbar.style\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFlag } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\ntype GameTopbarProps = {\r\n  nFlags: number;\r\n  reset: () => void;\r\n};\r\n\r\nexport function GameTopbar({ nFlags, reset }: GameTopbarProps) {\r\n  return (\r\n    <StyledTopbar>\r\n      <span>\r\n        <FontAwesomeIcon icon={faFlag} id=\"flag\" /> {nFlags}\r\n      </span>\r\n      <span>Minesweeper</span>\r\n      <span id=\"restart\" onClick={reset}>\r\n        RESTART\r\n      </span>\r\n    </StyledTopbar>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledMessageContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  position: absolute;\r\n  flex-direction: column;\r\n  z-index: 300;\r\n  background-color: rgba(255, 255, 255, 0.233);\r\n  width: 100%;\r\n  height: 100%;\r\n  bottom: 0;\r\n  h2 {\r\n    display: block;\r\n    font-size: 3rem;\r\n    color: #e07918;\r\n    margin-bottom: 10px;\r\n  }\r\n  button {\r\n    text-transform: uppercase;\r\n    padding: 10px 20px;\r\n    font-size: 1.1rem;\r\n    border: none;\r\n    background-color: #2d61f1;\r\n    color: white;\r\n    :hover {\r\n      background-color: #3b6df8;\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { GameStatus } from \"../minesweeper.utils\";\r\nimport { StyledMessageContainer } from \"./message.style\";\r\n\r\ntype MessageBoxProps = {\r\n  state: GameStatus;\r\n  reset: () => void;\r\n};\r\n\r\nexport function MessageBox({ state, reset }: MessageBoxProps) {\r\n  const message = (() => {\r\n    if (state === GameStatus.GAMEOVER) return \"GAMEOVER\";\r\n    if (state === GameStatus.VICTORY) return \"VICTORY\";\r\n  })();\r\n  return (\r\n    <StyledMessageContainer>\r\n      <h2>{message}</h2>\r\n      <button onClick={reset}>Play again</button>\r\n    </StyledMessageContainer>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { BoardModel } from \"../../models/BoardModel\";\r\nimport { GameStatus, LEVELS } from \"./minesweeper.utils\";\r\nimport { NEIGHBOURS } from \"../../utils/utils\";\r\nimport Board from \"../board/baoard.component\";\r\nimport { GameTopbar } from \"./topbar/topbar.component\";\r\nimport { MessageBox } from \"./messagebox/message.component\";\r\n\r\nexport default function Minesweeper() {\r\n  const [gameState, setGameState] = useState({\r\n    difficulty: LEVELS.EASY,\r\n    status: GameStatus.INPROGRESS,\r\n    board: new BoardModel(\r\n      LEVELS.EASY.rows,\r\n      LEVELS.EASY.columns,\r\n      LEVELS.EASY.mines\r\n    ),\r\n  });\r\n  const [cellLeft, setCellLeft] = useState(\r\n    LEVELS.EASY.rows * LEVELS.EASY.columns - LEVELS.EASY.mines\r\n  );\r\n  const [nFlags, setNFlags] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (cellLeft === 0)\r\n      setGameState((prev) => ({ ...prev, status: GameStatus.VICTORY }));\r\n  }, [cellLeft]);\r\n\r\n  const showAndExpand = (row: number, col: number): void => {\r\n    const cell = gameState.board.field[row][col];\r\n    if (cell.isRevealed || cell.hasFlag) return;\r\n    if (cell.hasMine) {\r\n      gameState.board.showAllMines();\r\n      setGameState((prev) => ({ ...prev, status: GameStatus.GAMEOVER }));\r\n      return;\r\n    }\r\n\r\n    cell.reveal();\r\n    setCellLeft((prev) => prev - 1);\r\n    if (cell.proximity > 0) return;\r\n\r\n    for (let [c, r] of NEIGHBOURS) {\r\n      c += col;\r\n      r += row;\r\n      if (gameState.board.checkLimits(r, c)) showAndExpand(r, c);\r\n    }\r\n  };\r\n\r\n  const toggleFlag = (row: number, col: number) => {\r\n    if (gameState.status === GameStatus.INPROGRESS) {\r\n      let cell = gameState.board.field[row][col];\r\n      if (cell.hasFlag) {\r\n        setNFlags((prev) => prev - 1);\r\n        cell.toggleFlag();\r\n      } else if (nFlags < gameState.difficulty.mines) {\r\n        setNFlags((prev) => prev + 1);\r\n        cell.toggleFlag();\r\n      }\r\n    }\r\n  };\r\n\r\n  const resetGame = (): void => {\r\n    setGameState((prev) => ({\r\n      ...prev,\r\n      status: GameStatus.INPROGRESS,\r\n      board: new BoardModel(\r\n        prev.difficulty.rows,\r\n        prev.difficulty.columns,\r\n        prev.difficulty.mines\r\n      ),\r\n    }));\r\n    setCellLeft(\r\n      gameState.difficulty.rows * gameState.difficulty.columns -\r\n        gameState.difficulty.mines\r\n    );\r\n    setNFlags(0);\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <GameTopbar\r\n        nFlags={gameState.difficulty.mines - nFlags}\r\n        reset={resetGame}\r\n      />\r\n      <section style={{ position: \"relative\" }}>\r\n        {gameState.status !== GameStatus.INPROGRESS && (\r\n          <MessageBox reset={resetGame} state={gameState.status} />\r\n        )}\r\n        <Board\r\n          {...gameState.board}\r\n          showAndExpand={showAndExpand}\r\n          toggleFlag={toggleFlag}\r\n        />\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\nimport Minesweeper from \"./components/minesweeper/minesweeper.component\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Minesweeper />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}