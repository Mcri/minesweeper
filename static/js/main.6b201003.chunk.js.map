{"version":3,"sources":["types/index.ts","constants/index.ts","components/cell/cell.style.ts","state/actions.ts","components/cell/cell.component.tsx","providers/minesweeper.provider.tsx","helpers/index.ts","components/board/baoard.component.tsx","components/minesweeper/topbar/topbar.style.ts","components/minesweeper/topbar/topbar.component.tsx","components/minesweeper/messagebox/message.style.ts","components/minesweeper/messagebox/message.component.tsx","components/minesweeper/levels/levels.style.ts","components/minesweeper/levels/levels.component.tsx","components/minesweeper/minesweeper.component.tsx","state/reducer.ts","App.tsx","index.tsx"],"names":["GameStatus","NEIGHBOURS","LEVELS","EASY","difficulty","rows","columns","mines","MEDIUM","HARD","INITIAL_GAME_STATE","level","status","INPROGRESS","board","nFlags","cellLeft","COLORS","CAMP_COLORS","styled","ActionType","div","props","color","bg","mineColor","isRevealed","memo","x","y","hasFlag","hasMine","proximity","onLeftClick","onRightClick","CAMP_COLORS_PAIR","getCampColorsPair","Math","round","random","length","onClick","onContextMenu","e","preventDefault","icon","faFlag","id","faBomb","MinesweeperContext","createContext","MinesweeperProvider","children","reducer","initialState","useReducer","state","dispatch","Provider","value","minesCoordinates","getRandomCoordinate","min","max","floor","checkLimits","coords","col","row","placeMines","nMines","counter","cell","push","c","defineMineProximity","buildBoard","showAllMines","updatedBoard","toggleFlag","showAndExpand","cols","revealCell","r","Board","useContext","useCallback","type","SET_GAME_OVER","payload","REVEAL_CELLS","placeFlag","SET_FLAG","map","style","display","StyledTopbar","section","GameTopbar","reset","StyledMessageContainer","MessageBox","message","GAMEOVER","VICTORY","StyledLevelsBar","Levels","changeLevel","active","className","Minesweeper","useEffect","BUILD_BOARD","SET_VICTORY","resetGame","RESET_GAME","target","CHANGE_LEVEL","position","action","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6b201003.chunk.js","sourcesContent":["export type Coords = [x: number, y: number];\r\n\r\nexport enum GameStatus {\r\n  INPROGRESS,\r\n  GAMEOVER,\r\n  VICTORY,\r\n}\r\n\r\nexport type Level = {\r\n  difficulty: string;\r\n  rows: number;\r\n  columns: number;\r\n  mines: number;\r\n};\r\n\r\nexport type Cell = {\r\n  x: number;\r\n  y: number;\r\n  hasMine: boolean;\r\n  isRevealed: boolean;\r\n  hasFlag: boolean;\r\n  proximity: number;\r\n};\r\n\r\nexport type GameState = {\r\n  level: Level;\r\n  status: GameStatus;\r\n  board: Cell[][];\r\n  nFlags: number;\r\n  cellLeft: number;\r\n};\r\n","import { Coords, GameState, GameStatus, Level } from \"../types\";\r\n\r\nexport const NEIGHBOURS: Coords[] = [\r\n  [-1, -1],\r\n  [0, -1],\r\n  [1, -1],\r\n  [-1, 0],\r\n  [1, 0],\r\n  [-1, 1],\r\n  [0, 1],\r\n  [1, 1],\r\n];\r\n\r\nexport const LEVELS: { [key: string]: Level } = {\r\n  EASY: {\r\n    difficulty: \"EASY\",\r\n    rows: 10,\r\n    columns: 10,\r\n    mines: 15,\r\n  },\r\n  MEDIUM: {\r\n    difficulty: \"MEDIUM\",\r\n    rows: 15,\r\n    columns: 15,\r\n    mines: 35,\r\n  },\r\n  HARD: {\r\n    difficulty: \"HARD\",\r\n    rows: 15,\r\n    columns: 15,\r\n    mines: 50,\r\n  },\r\n};\r\n\r\nexport const INITIAL_GAME_STATE: GameState = {\r\n  level: LEVELS.EASY,\r\n  status: GameStatus.INPROGRESS,\r\n  board: [],\r\n  nFlags: LEVELS.EASY.mines,\r\n  cellLeft: LEVELS.EASY.rows * LEVELS.EASY.columns - LEVELS.EASY.mines,\r\n};\r\n\r\nexport const COLORS = [\r\n  \"#2d2fa3\",\r\n  \"rgb(57, 128, 25)\",\r\n  \"rgb(211, 76, 22)\",\r\n  \"rgb(204, 19, 19)\",\r\n  \"rgb(156, 6, 56)\",\r\n];\r\n\r\nexport const CAMP_COLORS = {\r\n  LIGHTGREEN: \"rgb(170, 219, 124)\",\r\n  DARKGREEN: \"rgb(133, 201, 130)\",\r\n  LIGHTBROWN: \"rgb(180, 156, 125)\",\r\n  DARKBROWN: \"rgb(156, 138, 115)\",\r\n};\r\n\r\nexport const getCampColorsPair = (isRevealed: boolean): string[] => {\r\n  return isRevealed\r\n    ? [CAMP_COLORS.LIGHTBROWN, CAMP_COLORS.DARKBROWN]\r\n    : [CAMP_COLORS.LIGHTGREEN, CAMP_COLORS.DARKGREEN];\r\n};\r\n","import styled from \"styled-components\";\r\n\r\ntype StyledCellProp = {\r\n  bg: string;\r\n  color: string;\r\n  mineColor: string;\r\n  isRevealed: boolean;\r\n};\r\n\r\nexport default styled.div<StyledCellProp>`\r\n  width: 35px;\r\n  height: 35px;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: ${(props) => props.color};\r\n  background-color: ${(props) => props.bg};\r\n  \r\n  > svg#flag {\r\n    color: rgb(204, 19, 19);\r\n  }\r\n  > svg {\r\n    color: ${(props) => props.mineColor};\r\n    font-size: 1.2rem;\r\n  }\r\n  ::after {\r\n    content: \"\";\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n  }\r\n  :hover::after {\r\n    background-color: ${(props) =>\r\n      !props.isRevealed && \"rgba(255, 255, 255, 0.253)\"};\r\n  }\r\n`;\r\n","import { Cell, Level } from \"../types\";\r\n\r\nexport enum ActionType {\r\n  BUILD_BOARD,\r\n  RESET_GAME,\r\n  SET_GAME_OVER,\r\n  SET_VICTORY,\r\n  SET_FLAG,\r\n  REVEAL_CELLS,\r\n  CHANGE_LEVEL,\r\n}\r\n\r\nexport interface RevealCellsAction {\r\n  type: ActionType.REVEAL_CELLS;\r\n  payload: {\r\n    board: Cell[][];\r\n    cellLeft: number;\r\n  };\r\n}\r\n\r\nexport interface SetFlagAction {\r\n  type: ActionType.SET_FLAG;\r\n  payload: {\r\n    board: Cell[][];\r\n    nFlags: number;\r\n  };\r\n}\r\n\r\nexport interface SetGameOverAction {\r\n  type: ActionType.SET_GAME_OVER;\r\n  payload: {\r\n    board: Cell[][];\r\n  };\r\n}\r\n\r\nexport interface SetVictoryAction {\r\n  type: ActionType.SET_VICTORY;\r\n}\r\n\r\nexport interface ResetGameAction {\r\n  type: ActionType.RESET_GAME;\r\n}\r\n\r\nexport interface ChangeLevelAction {\r\n  type: ActionType.CHANGE_LEVEL;\r\n  payload: {\r\n    level: Level;\r\n  };\r\n}\r\n\r\nexport interface BuildBoardAction {\r\n  type: ActionType.BUILD_BOARD;\r\n}\r\n\r\nexport type GameAction =\r\n  | RevealCellsAction\r\n  | SetFlagAction\r\n  | SetVictoryAction\r\n  | SetGameOverAction\r\n  | ResetGameAction\r\n  | ChangeLevelAction\r\n  | BuildBoardAction;\r\n","import React, { memo } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFlag, faBomb } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { COLORS, getCampColorsPair } from \"../../constants\";\r\nimport StyledCell from \"./cell.style\";\r\n\r\ntype CellProps = {\r\n  x: number;\r\n  y: number;\r\n  isRevealed: boolean;\r\n  hasFlag: boolean;\r\n  hasMine: boolean;\r\n  proximity: number;\r\n  onLeftClick: (row: number, column: number) => void;\r\n  onRightClick: (row: number, column: number) => void;\r\n};\r\n\r\nexport default memo(function Cell({\r\n  x,\r\n  y,\r\n  isRevealed,\r\n  hasFlag,\r\n  hasMine,\r\n  proximity,\r\n  onLeftClick,\r\n  onRightClick,\r\n}: CellProps) {\r\n  const bg = (() => {\r\n    const CAMP_COLORS_PAIR = getCampColorsPair(isRevealed);\r\n    let bg: string;\r\n    if (y % 2 === 0)\r\n      bg = x % 2 === 0 ? CAMP_COLORS_PAIR[0] : CAMP_COLORS_PAIR[1];\r\n    else bg = x % 2 === 0 ? CAMP_COLORS_PAIR[1] : CAMP_COLORS_PAIR[0];\r\n    return bg;\r\n  })();\r\n\r\n  const mineColor = COLORS[Math.round(Math.random() * COLORS.length)];\r\n\r\n  const handleLeftClick = () => {\r\n    onLeftClick(y, x);\r\n  };\r\n\r\n  const handleRightClick = (\r\n    e: React.MouseEvent<HTMLDivElement, MouseEvent>\r\n  ) => {\r\n    e.preventDefault();\r\n    onRightClick(y, x);\r\n  };\r\n\r\n  return (\r\n    <StyledCell\r\n      bg={bg}\r\n      color={COLORS[proximity]}\r\n      mineColor={mineColor}\r\n      isRevealed={isRevealed}\r\n      onClick={handleLeftClick}\r\n      onContextMenu={handleRightClick}\r\n    >\r\n      {hasFlag && !isRevealed && <FontAwesomeIcon icon={faFlag} id=\"flag\" />}\r\n      {hasMine && isRevealed && <FontAwesomeIcon icon={faBomb} />}\r\n      {isRevealed && proximity > 0 && <p>{proximity}</p>}\r\n    </StyledCell>\r\n  );\r\n});\r\n","import React, { createContext, ReactNode, useReducer } from \"react\";\r\nimport { INITIAL_GAME_STATE } from \"../constants\";\r\nimport { GameAction } from \"../state/actions\";\r\nimport { GameState } from \"../types\";\r\n\r\nexport const MinesweeperContext = createContext<\r\n  [GameState, React.Dispatch<GameAction>]\r\n>([INITIAL_GAME_STATE, () => null]);\r\n\r\nexport type Props = {\r\n  children: ReactNode;\r\n  initialState: GameState;\r\n  reducer: (state: GameState, action: GameAction) => GameState;\r\n};\r\n\r\nexport const MinesweeperProvider = ({\r\n  children,\r\n  reducer,\r\n  initialState,\r\n}: Props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  return (\r\n    <MinesweeperContext.Provider value={[state, dispatch]}>\r\n      {children}\r\n    </MinesweeperContext.Provider>\r\n  );\r\n};\r\n","import { NEIGHBOURS } from \"../constants\";\r\nimport { Cell, Coords } from \"../types\";\r\n\r\nlet minesCoordinates: Coords[] = [];\r\n\r\nfunction getRandomCoordinate(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function checkLimits(\r\n  coords: Coords,\r\n  rows: number,\r\n  columns: number\r\n): boolean {\r\n  const [col, row] = coords;\r\n  return row >= 0 && row <= rows - 1 && col >= 0 && col <= columns - 1;\r\n}\r\n\r\nfunction defineMineProximity(\r\n  board: Cell[][],\r\n  rows: number,\r\n  columns: number\r\n): void {\r\n  for (let [x, y] of minesCoordinates) {\r\n    for (let [c, r] of NEIGHBOURS) {\r\n      const row = y + r;\r\n      const col = x + c;\r\n\r\n      if (checkLimits([col, row], rows, columns) && !board[row][col].hasMine) {\r\n        board[row][col].proximity++;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction placeMines(\r\n  nMines: number,\r\n  rows: number,\r\n  columns: number,\r\n  board: Cell[][]\r\n): void {\r\n  let counter = 0;\r\n\r\n  while (counter < nMines) {\r\n    let [x, y]: Coords = [\r\n      getRandomCoordinate(0, columns - 1),\r\n      getRandomCoordinate(0, rows - 1),\r\n    ];\r\n\r\n    let cell = board[y][x];\r\n    if (!cell.hasMine) {\r\n      cell.hasMine = true;\r\n      counter++;\r\n      minesCoordinates.push([x, y]);\r\n    }\r\n  }\r\n  defineMineProximity(board, rows, columns);\r\n}\r\n\r\nexport function buildBoard(\r\n  nMines: number,\r\n  rows: number,\r\n  columns: number\r\n): Cell[][] {\r\n  minesCoordinates = [];\r\n  const board: Cell[][] = [];\r\n  for (let y = 0; y < rows; y++) {\r\n    board.push([]);\r\n    for (let x = 0; x < columns; x++)\r\n      board[y].push({\r\n        x,\r\n        y,\r\n        hasMine: false,\r\n        hasFlag: false,\r\n        isRevealed: false,\r\n        proximity: 0,\r\n      });\r\n  }\r\n  placeMines(nMines, rows, columns, board);\r\n  return board;\r\n}\r\n\r\nexport function showAllMines(board: Cell[][]): Cell[][] {\r\n  const updatedBoard = [...board];\r\n  for (let [x, y] of minesCoordinates) {\r\n    updatedBoard[y][x].isRevealed = true;\r\n  }\r\n  return updatedBoard;\r\n}\r\n\r\nexport function toggleFlag(\r\n  [x, y]: Coords,\r\n  board: Cell[][],\r\n  nFlags: number,\r\n  nMines: number\r\n) {\r\n  const updatedBoard = [...board];\r\n  const cell = updatedBoard[y][x];\r\n  if (cell.hasFlag) {\r\n    nFlags++;\r\n    cell.hasFlag = false;\r\n  } else if (nFlags > 0) {\r\n    nFlags--;\r\n    cell.hasFlag = true;\r\n  }\r\n  return { board: updatedBoard, nFlags };\r\n}\r\n\r\nexport function showAndExpand(\r\n  [x, y]: Coords,\r\n  board: Cell[][],\r\n  cellLeft: number\r\n): { board: Cell[][]; cellLeft: number } {\r\n  const rows = board.length;\r\n  const cols = board[0].length;\r\n  const updatedBoard = [...board];\r\n  const revealCell = (x: number, y: number) => {\r\n    const cell = updatedBoard[y][x];\r\n    if (cell.isRevealed || cell.hasFlag) return;\r\n    cell.isRevealed = true;\r\n    cellLeft--;\r\n    if (cell.proximity > 0) return;\r\n\r\n    for (let [c, r] of NEIGHBOURS) {\r\n      c += x;\r\n      r += y;\r\n      if (checkLimits([c, r], rows, cols)) revealCell(c, r);\r\n    }\r\n  };\r\n  revealCell(x, y);\r\n\r\n  return { board: updatedBoard, cellLeft };\r\n}\r\n","import React, { useCallback, useContext } from \"react\";\r\nimport CellView from \"../cell/cell.component\";\r\nimport { MinesweeperContext } from \"../../providers/minesweeper.provider\";\r\nimport { GameStatus } from \"../../types\";\r\nimport { showAllMines, showAndExpand, toggleFlag } from \"../../helpers\";\r\nimport { ActionType } from \"../../state/actions\";\r\n\r\nexport default function Board() {\r\n  const [{ board, status, cellLeft, level, nFlags }, dispatch] = useContext(\r\n    MinesweeperContext\r\n  );\r\n\r\n  const revealCell = useCallback(\r\n    (row: number, col: number): void => {\r\n      if (status === GameStatus.INPROGRESS) {\r\n        const cell = board[row][col];\r\n        if (cell.hasMine) {\r\n          dispatch({\r\n            type: ActionType.SET_GAME_OVER,\r\n            payload: { board: showAllMines(board) },\r\n          });\r\n          return;\r\n        }\r\n        dispatch({\r\n          type: ActionType.REVEAL_CELLS,\r\n          payload: showAndExpand([col, row], board, cellLeft),\r\n        });\r\n      }\r\n    },\r\n    [board, cellLeft, dispatch, status]\r\n  );\r\n\r\n  const placeFlag = useCallback(\r\n    (row: number, col: number) => {\r\n      if (status === GameStatus.INPROGRESS && nFlags <= level.mines) {\r\n        dispatch({\r\n          type: ActionType.SET_FLAG,\r\n          payload: toggleFlag([col, row], board, nFlags, level.mines),\r\n        });\r\n      }\r\n    },\r\n    [board, dispatch, level.mines, nFlags, status]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {board.map((row, y) => (\r\n        <div key={`row-${y}`} style={{ display: \"flex\" }}>\r\n          {row.map((cell, x) => (\r\n            <CellView\r\n              key={`col-${x}`}\r\n              {...cell}\r\n              onLeftClick={revealCell}\r\n              onRightClick={placeFlag}\r\n            />\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledTopbar = styled.section`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  text-transform: uppercase;\r\n  font-weight: 600;\r\n  margin-bottom: 10px;\r\n  color: rgb(133, 201, 130);\r\n  svg#flag {\r\n    color: rgb(204, 19, 19);\r\n  }\r\n  > #restart:hover {\r\n    text-decoration: underline;\r\n    color: rgb(207, 203, 56);\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { StyledTopbar } from \"./topbar.style\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFlag } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\ntype GameTopbarProps = {\r\n  nFlags: number;\r\n  reset: () => void;\r\n};\r\n\r\nexport function GameTopbar({ nFlags, reset }: GameTopbarProps) {\r\n  return (\r\n    <StyledTopbar>\r\n      <span>\r\n        <FontAwesomeIcon icon={faFlag} id=\"flag\" /> {nFlags}\r\n      </span>\r\n      <span id=\"restart\" onClick={reset}>\r\n        RESTART\r\n      </span>\r\n    </StyledTopbar>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledMessageContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  position: absolute;\r\n  flex-direction: column;\r\n  z-index: 300;\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  width: 100%;\r\n  height: 100%;\r\n  bottom: 0;\r\n  h2 {\r\n    display: block;\r\n    font-size: 3rem;\r\n    color: rgb(56, 82, 62);\r\n    margin-bottom: 10px;\r\n  }\r\n  button {\r\n    text-transform: uppercase;\r\n    padding: 10px 20px;\r\n    font-size: 1.1rem;\r\n    border: none;\r\n    background-color: rgb(207, 203, 56);\r\n    color: white;\r\n    :hover {\r\n      background-color: rgb(201, 197, 24);\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { GameStatus } from \"../../../types\";\r\nimport { StyledMessageContainer } from \"./message.style\";\r\n\r\ntype MessageBoxProps = {\r\n  state: GameStatus;\r\n  reset: () => void;\r\n};\r\n\r\nexport function MessageBox({ state, reset }: MessageBoxProps) {\r\n  const message = (() => {\r\n    if (state === GameStatus.GAMEOVER) return \"GAME OVER\";\r\n    if (state === GameStatus.VICTORY) return \"VICTORY\";\r\n  })();\r\n  return (\r\n    <StyledMessageContainer>\r\n      <h2>{message}</h2>\r\n      <button onClick={reset}>Play again</button>\r\n    </StyledMessageContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledLevelsBar = styled.section`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 10px;\r\n  button {\r\n    padding: 5px 0;\r\n    color: #ccc;\r\n    font-weight: 700;\r\n    border: 1px solid #ccc;\r\n    flex-grow: 1;\r\n    outline: none;\r\n    background: none;\r\n    :hover {\r\n      color: rgb(207, 203, 56);\r\n    };\r\n    &.active {\r\n      background-color: rgb(56, 82, 62);\r\n      color: white;\r\n      border: none;\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { StyledLevelsBar } from \"./levels.style\";\r\n\r\ntype LevelsProps = {\r\n  changeLevel: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n  active: string;\r\n};\r\n\r\nexport function Levels({ changeLevel, active }: LevelsProps) {\r\n  return (\r\n    <StyledLevelsBar>\r\n      <button\r\n        onClick={changeLevel}\r\n        value=\"EASY\"\r\n        className={active === \"EASY\" ? \"active\" : \"\"}\r\n      >\r\n        EASY\r\n      </button>\r\n      <button\r\n        onClick={changeLevel}\r\n        value=\"MEDIUM\"\r\n        className={active === \"MEDIUM\" ? \"active\" : \"\"}\r\n      >\r\n        MEDIUM\r\n      </button>\r\n      <button\r\n        onClick={changeLevel}\r\n        value=\"HARD\"\r\n        className={active === \"HARD\" ? \"active\" : \"\"}\r\n      >\r\n        HARD\r\n      </button>\r\n    </StyledLevelsBar>\r\n  );\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport Board from \"../board/baoard.component\";\r\nimport { GameTopbar } from \"./topbar/topbar.component\";\r\nimport { MessageBox } from \"./messagebox/message.component\";\r\nimport { GameStatus } from \"../../types\";\r\nimport { MinesweeperContext } from \"../../providers/minesweeper.provider\";\r\nimport { ActionType } from \"../../state/actions\";\r\nimport { Levels } from \"./levels/levels.component\";\r\nimport { LEVELS } from \"../../constants\";\r\n\r\nexport default function Minesweeper() {\r\n  const [{ status, cellLeft, nFlags, level }, dispatch] = useContext(\r\n    MinesweeperContext\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: ActionType.BUILD_BOARD });\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (cellLeft === 0) dispatch({ type: ActionType.SET_VICTORY });\r\n  }, [dispatch, cellLeft]);\r\n\r\n  const resetGame = (): void => {\r\n    dispatch({ type: ActionType.RESET_GAME });\r\n  };\r\n\r\n  const changeLevel = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    const value = (e.target as HTMLButtonElement).value;\r\n    dispatch({\r\n      type: ActionType.CHANGE_LEVEL,\r\n      payload: { level: LEVELS[value] },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <h1>Minesweeper</h1>\r\n      <Levels changeLevel={changeLevel} active={level.difficulty} />\r\n      <GameTopbar nFlags={nFlags} reset={resetGame} />\r\n      <section style={{ position: \"relative\" }}>\r\n        {status !== GameStatus.INPROGRESS && (\r\n          <MessageBox reset={resetGame} state={status} />\r\n        )}\r\n        <Board />\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import { GameState, GameStatus } from \"../types\";\r\nimport { GameAction, ActionType } from \"./actions\";\r\nimport { buildBoard } from \"../helpers\";\r\n\r\nexport const reducer = (state: GameState, action: GameAction): GameState => {\r\n  switch (action.type) {\r\n    case ActionType.BUILD_BOARD:\r\n      return {\r\n        ...state,\r\n        board: buildBoard(\r\n          state.level.mines,\r\n          state.level.rows,\r\n          state.level.columns\r\n        ),\r\n      };\r\n    case ActionType.REVEAL_CELLS:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.SET_FLAG:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.SET_GAME_OVER:\r\n      return {\r\n        ...state,\r\n        status: GameStatus.GAMEOVER,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.SET_VICTORY:\r\n      return {\r\n        ...state,\r\n        status: GameStatus.VICTORY,\r\n      };\r\n    case ActionType.RESET_GAME:\r\n      return {\r\n        ...state,\r\n        status: GameStatus.INPROGRESS,\r\n        board: buildBoard(\r\n          state.level.mines,\r\n          state.level.rows,\r\n          state.level.columns\r\n        ),\r\n        cellLeft: state.level.columns * state.level.rows - state.level.mines,\r\n        nFlags: state.level.mines,\r\n      };\r\n    case ActionType.CHANGE_LEVEL:\r\n      const { level } = action.payload;\r\n      return {\r\n        ...state,\r\n        level: level,\r\n        board: buildBoard(level.mines, level.rows, level.columns),\r\n        cellLeft: level.columns * level.rows - level.mines,\r\n        nFlags: level.mines,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from \"react\";\nimport Minesweeper from \"./components/minesweeper/minesweeper.component\";\nimport { MinesweeperProvider } from \"./providers/minesweeper.provider\";\nimport { reducer } from \"./state/reducer\";\nimport { INITIAL_GAME_STATE } from \"./constants\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <MinesweeperProvider initialState={INITIAL_GAME_STATE} reducer={reducer}>\n        <Minesweeper />\n      </MinesweeperProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}