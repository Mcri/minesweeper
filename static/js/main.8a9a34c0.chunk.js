(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{29:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var r,c=t(1),a=t(0),o=t.n(a),i=t(19),s=t.n(i),l=(t(29),t(4)),u=t(2),b=t(8),f=t(9);!function(e){e[e.TO_START=0]="TO_START",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.GAME_OVER=2]="GAME_OVER",e[e.VICTORY=3]="VICTORY"}(r||(r={}));var j=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],O={EASY:{difficulty:"EASY",rows:10,columns:10,mines:15},MEDIUM:{difficulty:"MEDIUM",rows:15,columns:15,mines:35},HARD:{difficulty:"HARD",rows:15,columns:15,mines:50}},d={level:O.EASY,status:r.TO_START,board:[],nFlags:O.EASY.mines,cellsLeft:O.EASY.rows*O.EASY.columns-O.EASY.mines},E={x:0,y:0,hasMine:!1,hasFlag:!1,isRevealed:!1,proximity:0},v=["rgb(45, 47, 163)","rgb(57, 128, 25)","rgb(211, 76, 22)","rgb(204, 19, 19)","rgb(156, 6, 56)"],h="rgb(170, 219, 124)",g="rgb(133, 201, 130)",R="rgb(180, 156, 125)",m="rgb(156, 138, 115)",p=t(11),A=[];function x(e,n){return Math.floor(Math.random()*(n-e+1))+e}function S(e,n,t){var r=Object(l.a)(e,2),c=r[0],a=r[1];return a>=0&&a<=n-1&&c>=0&&c<=t-1}function _(e,n,t){var r,c=Object(l.a)(e,2),a=c[0],o=c[1],i=n.length,s=n[0].length,u=Object(p.a)(j);try{for(u.s();!(r=u.n()).done;){var b=Object(l.a)(r.value,2),f=b[0],O=o+b[1],d=a+f;if(S([d,O],i,s)){var E=n[O][d];E.proximity=E.proximity+t}}}catch(v){u.e(v)}finally{u.f()}}function T(e,n,t){A=[];var r=function(e,n,t){for(var r=[],c=0;c<e;c++){r.push([]);for(var a=0;a<n;a++)r[c].push(Object(u.a)(Object(u.a)({},t),{},{x:a,y:c}))}return r}(n,t,E);return function(e,n){for(var t=n.length,r=n[0].length,c=0;c<e;){var a=[x(0,r-1),x(0,t-1)],o=a[0],i=a[1],s=n[i][o];s.hasMine||(s.hasMine=!0,c++,A.push([o,i]))}}(e,r),function(e){var n,t=Object(p.a)(A);try{for(t.s();!(n=t.n()).done;)_(n.value,e,1)}catch(r){t.e(r)}finally{t.f()}}(r),r}var M=t(23);function C(e){return Object(M.a)(e.map((function(e){return e.reduce((function(e,n){return e.concat(Object(u.a)({},n))}),[])})))}var L=function(e,n,t){var r=function(e){return e?[R,m]:[h,g]}(t);return n%2===0?e%2===0?r[0]:r[1]:e%2===0?r[1]:r[0]},y=t(5),I=t(6);function w(){var e=Object(y.a)(["\n  width: 35px;\n  height: 35px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 600;\n  color: ",";\n  background-color: ",";\n  \n  > svg#flag {\n    color: rgb(204, 19, 19);\n  }\n  > .mine {\n    width: 50%;\n    height: 50%;\n    border-radius: 50%;\n    background: ",';\n    filter: drop-shadow(0 0.6mm 0.2mm rgba(0,0,0,0.5))\n  }\n  ::after {\n    content: "";\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n  :hover::after {\n    background-color: ',";\n  }\n"]);return w=function(){return e},e}var G=I.a.div(w(),(function(e){return e.color}),(function(e){return e.bg}),(function(e){return e.mineColor}),(function(e){return!e.isRevealed&&"rgba(255, 255, 255, 0.253)"}));function V(e){var n=e.x,t=e.y,r=e.isRevealed,a=e.hasFlag,o=e.hasMine,i=e.proximity,s=e.onLeftClick,l=e.onRightClick,u=L(n,t,r),j=v[Math.round(Math.random()*(v.length-1))];return Object(c.jsxs)(G,{bg:u,color:v[i],mineColor:j,isRevealed:r,onClick:function(){s(t,n)},onContextMenu:function(e){e.preventDefault(),l(t,n)},children:[a&&!r&&Object(c.jsx)(b.a,{icon:f.a,id:"flag"}),o&&r&&Object(c.jsx)("div",{className:"mine"}),r&&!o&&i>0&&Object(c.jsx)("p",{children:i})]})}var k,F=Object(a.createContext)([d,function(){return null}]),N=function(e){var n=e.children,t=e.reducer,r=e.initialState,o=Object(a.useReducer)(t,r),i=Object(l.a)(o,2),s=i[0],u=i[1];return Object(c.jsx)(F.Provider,{value:[s,u],children:n})};!function(e){e[e.BUILD_BOARD=0]="BUILD_BOARD",e[e.START_GAME=1]="START_GAME",e[e.SET_VICTORY=2]="SET_VICTORY",e[e.SET_GAME_OVER=3]="SET_GAME_OVER",e[e.RESET_GAME=4]="RESET_GAME",e[e.CHANGE_LEVEL=5]="CHANGE_LEVEL",e[e.PLACE_FLAG=6]="PLACE_FLAG",e[e.REVEAL_CELLS=7]="REVEAL_CELLS",e[e.REPLACE_MINE=8]="REPLACE_MINE"}(k||(k={}));var D=function(e,n){switch(n.type){case k.BUILD_BOARD:return Object(u.a)(Object(u.a)({},e),{},{board:T(e.level.mines,e.level.rows,e.level.columns)});case k.START_GAME:return Object(u.a)(Object(u.a)({},e),{},{status:r.IN_PROGRESS});case k.SET_VICTORY:return Object(u.a)(Object(u.a)({},e),{},{status:r.VICTORY});case k.SET_GAME_OVER:return Object(u.a)(Object(u.a)({},e),{},{status:r.GAME_OVER},{board:e.board.map((function(e){return e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isRevealed:!!e.hasMine||e.isRevealed})}))}))});case k.REVEAL_CELLS:return Object(u.a)(Object(u.a)({},e),function(e,n,t){var r=Object(l.a)(e,2),c=r[0],a=r[1],o=n.length,i=n[0].length,s=C(n);return function e(n,r){var c=s[r][n];if(!(c.isRevealed||c.hasFlag||c.hasMine)&&(c.isRevealed=!0,t--,!(c.proximity>0))){var a,u=Object(p.a)(j);try{for(u.s();!(a=u.n()).done;){var b=Object(l.a)(a.value,2),f=b[0],O=b[1];S([f+=n,O+=r],o,i)&&e(f,O)}}catch(d){u.e(d)}finally{u.f()}}}(c,a),{board:s,cellsLeft:t}}(n.coords,e.board,e.cellsLeft));case k.PLACE_FLAG:return Object(u.a)(Object(u.a)({},e),function(e,n,t){var r=Object(l.a)(e,2),c=r[0],a=r[1];return{board:n.map((function(e,n){return e.map((function(e,r){if(r===c&&n===a){if(e.hasFlag)return t++,Object(u.a)(Object(u.a)({},e),{},{hasFlag:!1});if(t>0)return t--,Object(u.a)(Object(u.a)({},e),{},{hasFlag:!0})}return Object(u.a)({},e)}))})),nFlags:t}}(n.coords,e.board,e.nFlags));case k.REPLACE_MINE:return console.log("REPLACE MINE ON FIRST CLICK"),Object(u.a)(Object(u.a)({},e),function(e,n){var t=Object(l.a)(e,2),r=t[0],c=t[1],a=C(n),o=function(e){for(var n=e.length,t=e[0].length,r=0,c=0;e[c][r].hasMine&&c<n;)r>=t?(r=0,c++):r++;return[r,c]}(a),i=Object(l.a)(o,2),s=i[0],u=i[1];return a[c][r].hasMine=!1,_([r,c],a,-1),a[u][s].hasMine=!0,_([s,u],a,1),{board:a}}(n.coords,e.board));case k.RESET_GAME:return Object(u.a)(Object(u.a)({},e),{},{status:r.TO_START,board:T(e.level.mines,e.level.rows,e.level.columns),cellsLeft:e.level.columns*e.level.rows-e.level.mines,nFlags:e.level.mines});case k.CHANGE_LEVEL:var t=n.level;return{level:t,status:r.TO_START,board:T(t.mines,t.rows,t.columns),cellsLeft:t.columns*t.rows-t.mines,nFlags:t.mines};default:return e}};function Y(){var e=Object(a.useContext)(F),n=Object(l.a)(e,2),t=n[0],o=t.board,i=t.status,s=t.level,b=t.nFlags,f=n[1],j=function(e,n){var t=o[e][n];if(!(t.hasFlag||i>r.IN_PROGRESS)){if(i===r.TO_START)f({type:k.START_GAME}),t.hasMine&&f({type:k.REPLACE_MINE,coords:[n,e]});else if(t.hasMine)return void f({type:k.SET_GAME_OVER});f({type:k.REVEAL_CELLS,coords:[n,e]})}},O=function(e,n){i===r.IN_PROGRESS&&b<=s.mines&&f({type:k.PLACE_FLAG,coords:[n,e]})};return Object(c.jsx)("div",{children:o.map((function(e,n){return Object(c.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(c.jsx)(V,Object(u.a)(Object(u.a)({},e),{},{onLeftClick:j,onRightClick:O}),"col-".concat(n))}))},"row-".concat(n))}))})}function P(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  text-transform: uppercase;\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: rgb(133, 201, 130);\n  svg#flag {\n    color: rgb(204, 19, 19);\n  }\n  > #restart:hover {\n    text-decoration: underline;\n    color: rgb(207, 203, 56);\n  }\n"]);return P=function(){return e},e}var B=I.a.section(P());function H(){var e=Object(a.useContext)(F),n=Object(l.a)(e,1)[0].status,t=function(){var e=Object(a.useState)(0),n=Object(l.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(a.useRef)(null);Object(a.useEffect)((function(){return i?u.current=setInterval((function(){r((function(e){return e+1}))}),1e3):u.current&&clearInterval(u.current),function(){u.current&&clearInterval(u.current)}}),[i]);var b=Object(a.useCallback)((function(){s(!0)}),[]),f=Object(a.useCallback)((function(){s(!1)}),[]),j=Object(a.useCallback)((function(){f(),r(0)}),[f]);return{time:t,start:b,stop:f,reset:j}}(),o=t.time,i=t.start,s=t.stop,u=t.reset;Object(a.useEffect)((function(){return n===r.TO_START&&0!==o?u():n===r.IN_PROGRESS?i():s()}),[u,i,n,s,o]);return Object(c.jsxs)("span",{children:[Object(c.jsx)(b.a,{icon:f.b,id:"flag"})," ",new Date(1e3*o).toISOString().substr(14,5)]})}function U(e){var n=e.nFlags,t=e.reset;return Object(c.jsxs)(B,{children:[Object(c.jsxs)("span",{children:[Object(c.jsx)(b.a,{icon:f.a,id:"flag"})," ",n]}),Object(c.jsx)(H,{}),Object(c.jsx)("span",{id:"restart",onClick:t,children:"RESTART"})]})}function z(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  position: absolute;\n  flex-direction: column;\n  z-index: 300;\n  background-color: rgba(255, 255, 255, 0.2);\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n  letter-spacing: 0.1em;\n  h2 {\n    display: block;\n    font-size: 3rem;\n    color: rgb(56, 82, 62);\n    margin-bottom: 10px;\n    text-shadow: 0 1mm 0.8mm rgba(0, 0, 0, 0.2);\n  }\n  button {\n    letter-spacing: 0.1em;\n    padding: 10px 20px;\n    font-size: 1.1rem;\n    border: none;\n    background-color: rgb(201, 197, 24);\n    color: white;\n    filter: drop-shadow(0 0 1mm rgba(0, 0, 0, 0.5));\n    :hover {\n      background-color: rgb(201, 205, 24);\n    }\n  }\n"]);return z=function(){return e},e}var J=I.a.div(z());function K(e){var n=e.state,t=e.reset,a=n===r.GAME_OVER?"GAME OVER":n===r.VICTORY?"VICTORY":void 0;return Object(c.jsxs)(J,{children:[Object(c.jsx)("h2",{children:a}),Object(c.jsx)("button",{onClick:t,children:"Play again"})]})}function q(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  button {\n    padding: 5px 0;\n    color: #ccc;\n    font-weight: 700;\n    border: 1px solid #ccc;\n    flex-grow: 1;\n    outline: none;\n    background: none;\n    :hover {\n      color: rgb(207, 203, 56);\n    };\n    &.active {\n      background-color: rgb(56, 82, 62);\n      color: white;\n      border: none;\n    }\n  }\n"]);return q=function(){return e},e}var Q=I.a.section(q());function W(e){var n=e.changeLevel,t=e.active;return Object(c.jsxs)(Q,{children:[Object(c.jsx)("button",{onClick:n,value:"EASY",className:"EASY"===t?"active":"",children:"EASY"}),Object(c.jsx)("button",{onClick:n,value:"MEDIUM",className:"MEDIUM"===t?"active":"",children:"MEDIUM"}),Object(c.jsx)("button",{onClick:n,value:"HARD",className:"HARD"===t?"active":"",children:"HARD"})]})}function X(){var e=Object(a.useContext)(F),n=Object(l.a)(e,2),t=n[0],r=t.status,o=t.cellsLeft,i=t.nFlags,s=t.level,u=n[1];Object(a.useEffect)((function(){u({type:k.BUILD_BOARD})}),[u]),Object(a.useEffect)((function(){0===o&&u({type:k.SET_VICTORY})}),[u,o]);var b=function(){u({type:k.RESET_GAME})};return Object(c.jsxs)("main",{children:[Object(c.jsx)("h1",{children:"Minesweeper"}),Object(c.jsx)(W,{changeLevel:function(e){var n=e.target.value;u({type:k.CHANGE_LEVEL,level:O[n]})},active:s.difficulty}),Object(c.jsx)(U,{nFlags:i,reset:b}),Object(c.jsxs)("section",{style:{position:"relative"},children:[r>1&&Object(c.jsx)(K,{reset:b,state:r}),Object(c.jsx)(Y,{})]})]})}var Z=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(N,{initialState:d,reducer:D,children:Object(c.jsx)(X,{})})})};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(Z,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.8a9a34c0.chunk.js.map