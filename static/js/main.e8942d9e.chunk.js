(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{29:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var r,c=t(1),a=t(0),o=t.n(a),i=t(20),l=t.n(i),s=(t(29),t(4)),u=t(3),b=t(11),f=t(13);!function(e){e[e.INPROGRESS=0]="INPROGRESS",e[e.GAMEOVER=1]="GAMEOVER",e[e.VICTORY=2]="VICTORY"}(r||(r={}));var j=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],d={EASY:{difficulty:"EASY",rows:10,columns:10,mines:15},MEDIUM:{difficulty:"MEDIUM",rows:15,columns:15,mines:35},HARD:{difficulty:"HARD",rows:15,columns:15,mines:50}},O={level:d.EASY,status:r.INPROGRESS,board:[],nFlags:d.EASY.mines,cellsLeft:d.EASY.rows*d.EASY.columns-d.EASY.mines},v=["rgb(45, 47, 163)","rgb(57, 128, 25)","rgb(211, 76, 22)","rgb(204, 19, 19)","rgb(156, 6, 56)"],E="rgb(170, 219, 124)",h="rgb(133, 201, 130)",g="rgb(180, 156, 125)",p="rgb(156, 138, 115)",m=t(9),R=[];function x(e,n){return Math.floor(Math.random()*(n-e+1))+e}function S(e,n,t){var r=Object(s.a)(e,2),c=r[0],a=r[1];return a>=0&&a<=n-1&&c>=0&&c<=t-1}function A(e,n,t){R=[];for(var r=[],c=0;c<n;c++){r.push([]);for(var a=0;a<t;a++)r[c].push({x:a,y:c,hasMine:!1,hasFlag:!1,isRevealed:!1,proximity:0})}return function(e,n,t,r){for(var c=0;c<e;){var a=[x(0,t-1),x(0,n-1)],o=a[0],i=a[1],l=r[i][o];l.hasMine||(l.hasMine=!0,c++,R.push([o,i]))}}(e,n,t,r),function(e,n,t){for(var r=0,c=R;r<c.length;r++){var a,o=Object(s.a)(c[r],2),i=o[0],l=o[1],u=Object(m.a)(j);try{for(u.s();!(a=u.n()).done;){var b=Object(s.a)(a.value,2),f=b[0],d=l+b[1],O=i+f;S([O,d],n,t)&&!e[d][O].hasMine&&e[d][O].proximity++}}catch(v){u.e(v)}finally{u.f()}}}(r,n,t),r}var y=t(14);function L(e){var n,t=Object(y.a)(e),r=Object(m.a)(R);try{for(r.s();!(n=r.n()).done;){var c=Object(s.a)(n.value,2),a=c[0];t[c[1]][a].isRevealed=!0}}catch(o){r.e(o)}finally{r.f()}return{board:t}}function M(e,n,t){var r=Object(s.a)(e,2),c=r[0],a=r[1],o=Object(y.a)(n),i=o[a][c];return i.hasFlag?(t++,i.hasFlag=!1):t>0&&(t--,i.hasFlag=!0),{board:o,nFlags:t}}function C(e,n,t){var r=Object(s.a)(e,2),c=r[0],a=r[1],o=n.length,i=n[0].length,l=Object(y.a)(n);return function e(n,r){var c=l[r][n];if(!c.isRevealed&&!c.hasFlag&&(c.isRevealed=!0,t--,!(c.proximity>0))){var a,u=Object(m.a)(j);try{for(u.s();!(a=u.n()).done;){var b=Object(s.a)(a.value,2),f=b[0],d=b[1];S([f+=n,d+=r],o,i)&&e(f,d)}}catch(O){u.e(O)}finally{u.f()}}}(c,a),{board:l,cellsLeft:t}}var _=function(e,n,t){var r=function(e){return e?[g,p]:[E,h]}(t);return n%2===0?e%2===0?r[0]:r[1]:e%2===0?r[1]:r[0]},w=t(5),G=t(6);function I(){var e=Object(w.a)(["\n  width: 35px;\n  height: 35px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 600;\n  color: ",";\n  background-color: ",";\n  \n  > svg#flag {\n    color: rgb(204, 19, 19);\n  }\n  > .mine {\n    width: 50%;\n    height: 50%;\n    border-radius: 50%;\n    background: ",';\n    filter: drop-shadow(0 0.6mm 0.2mm rgba(0,0,0,0.5))\n  }\n  ::after {\n    content: "";\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n  :hover::after {\n    background-color: ',";\n  }\n"]);return I=function(){return e},e}var T,V=G.a.div(I(),(function(e){return e.color}),(function(e){return e.bg}),(function(e){return e.mineColor}),(function(e){return!e.isRevealed&&"rgba(255, 255, 255, 0.253)"})),k=Object(a.memo)((function(e){var n=e.x,t=e.y,r=e.isRevealed,a=e.hasFlag,o=e.hasMine,i=e.proximity,l=e.onLeftClick,s=e.onRightClick,u=_(n,t,r),j=v[Math.round(Math.random()*(v.length-1))];return Object(c.jsxs)(V,{bg:u,color:v[i],mineColor:j,isRevealed:r,onClick:function(){l(t,n)},onContextMenu:function(e){e.preventDefault(),s(t,n)},children:[a&&!r&&Object(c.jsx)(b.a,{icon:f.a,id:"flag"}),o&&r&&Object(c.jsx)("div",{className:"mine"}),r&&i>0&&Object(c.jsx)("p",{children:i})]})})),D=Object(a.createContext)([O,function(){return null}]),F=function(e){var n=e.children,t=e.reducer,r=e.initialState,o=Object(a.useReducer)(t,r),i=Object(s.a)(o,2),l=i[0],u=i[1];return Object(c.jsx)(D.Provider,{value:[l,u],children:n})};!function(e){e[e.BUILD_BOARD=0]="BUILD_BOARD",e[e.RESET_GAME=1]="RESET_GAME",e[e.SET_GAME_OVER=2]="SET_GAME_OVER",e[e.SET_VICTORY=3]="SET_VICTORY",e[e.SET_FLAG=4]="SET_FLAG",e[e.REVEAL_CELLS=5]="REVEAL_CELLS",e[e.CHANGE_LEVEL=6]="CHANGE_LEVEL"}(T||(T={}));var Y=function(e,n){switch(n.type){case T.BUILD_BOARD:return Object(u.a)(Object(u.a)({},e),{},{board:A(e.level.mines,e.level.rows,e.level.columns)});case T.REVEAL_CELLS:case T.SET_FLAG:return Object(u.a)(Object(u.a)({},e),n.payload);case T.SET_GAME_OVER:return Object(u.a)(Object(u.a)({},e),{},{status:r.GAMEOVER},n.payload);case T.SET_VICTORY:return Object(u.a)(Object(u.a)({},e),{},{status:r.VICTORY});case T.RESET_GAME:return Object(u.a)(Object(u.a)({},e),{},{status:r.INPROGRESS,board:A(e.level.mines,e.level.rows,e.level.columns),cellsLeft:e.level.columns*e.level.rows-e.level.mines,nFlags:e.level.mines});case T.CHANGE_LEVEL:var t=n.payload.level;return Object(u.a)(Object(u.a)({},e),{},{status:r.INPROGRESS,level:t,board:A(t.mines,t.rows,t.columns),cellsLeft:t.columns*t.rows-t.mines,nFlags:t.mines});default:return e}};function N(){var e=Object(a.useContext)(D),n=Object(s.a)(e,2),t=n[0],o=t.board,i=t.status,l=t.cellsLeft,b=t.level,f=t.nFlags,j=n[1],d=Object(a.useCallback)((function(e,n){var t=o[e][n];if(i===r.INPROGRESS&&!t.hasFlag){if(t.hasMine)return void j({type:T.SET_GAME_OVER,payload:L(o)});j({type:T.REVEAL_CELLS,payload:C([n,e],o,l)})}}),[o,l,j,i]),O=Object(a.useCallback)((function(e,n){i===r.INPROGRESS&&f<=b.mines&&j({type:T.SET_FLAG,payload:M([n,e],o,f)})}),[o,j,b.mines,f,i]);return Object(c.jsx)("div",{children:o.map((function(e,n){return Object(c.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(c.jsx)(k,Object(u.a)(Object(u.a)({},e),{},{onLeftClick:d,onRightClick:O}),"col-".concat(n))}))},"row-".concat(n))}))})}function P(){var e=Object(w.a)(["\n  display: flex;\n  justify-content: space-between;\n  text-transform: uppercase;\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: rgb(133, 201, 130);\n  svg#flag {\n    color: rgb(204, 19, 19);\n  }\n  > #restart:hover {\n    text-decoration: underline;\n    color: rgb(207, 203, 56);\n  }\n"]);return P=function(){return e},e}var B=G.a.section(P());function H(e){var n=e.nFlags,t=e.reset;return Object(c.jsxs)(B,{children:[Object(c.jsxs)("span",{children:[Object(c.jsx)(b.a,{icon:f.a,id:"flag"})," ",n]}),Object(c.jsx)("span",{id:"restart",onClick:t,children:"RESTART"})]})}function U(){var e=Object(w.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  position: absolute;\n  flex-direction: column;\n  z-index: 300;\n  background-color: rgba(255, 255, 255, 0.2);\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n  h2 {\n    display: block;\n    font-size: 3rem;\n    color: rgb(56, 82, 62);\n    margin-bottom: 10px;\n  }\n  button {\n    text-transform: uppercase;\n    padding: 10px 20px;\n    font-size: 1.1rem;\n    border: none;\n    background-color: rgb(207, 203, 56);\n    color: white;\n    :hover {\n      background-color: rgb(201, 197, 24);\n    }\n  }\n"]);return U=function(){return e},e}var z=G.a.div(U());function J(e){var n=e.state,t=e.reset,a=n===r.GAMEOVER?"GAME OVER":n===r.VICTORY?"VICTORY":void 0;return Object(c.jsxs)(z,{children:[Object(c.jsx)("h2",{children:a}),Object(c.jsx)("button",{onClick:t,children:"Play again"})]})}function q(){var e=Object(w.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  button {\n    padding: 5px 0;\n    color: #ccc;\n    font-weight: 700;\n    border: 1px solid #ccc;\n    flex-grow: 1;\n    outline: none;\n    background: none;\n    :hover {\n      color: rgb(207, 203, 56);\n    };\n    &.active {\n      background-color: rgb(56, 82, 62);\n      color: white;\n      border: none;\n    }\n  }\n"]);return q=function(){return e},e}var K=G.a.section(q());function Q(e){var n=e.changeLevel,t=e.active;return Object(c.jsxs)(K,{children:[Object(c.jsx)("button",{onClick:n,value:"EASY",className:"EASY"===t?"active":"",children:"EASY"}),Object(c.jsx)("button",{onClick:n,value:"MEDIUM",className:"MEDIUM"===t?"active":"",children:"MEDIUM"}),Object(c.jsx)("button",{onClick:n,value:"HARD",className:"HARD"===t?"active":"",children:"HARD"})]})}function W(){var e=Object(a.useContext)(D),n=Object(s.a)(e,2),t=n[0],o=t.status,i=t.cellsLeft,l=t.nFlags,u=t.level,b=n[1];Object(a.useEffect)((function(){b({type:T.BUILD_BOARD})}),[b]),Object(a.useEffect)((function(){0===i&&b({type:T.SET_VICTORY})}),[b,i]);var f=function(){b({type:T.RESET_GAME})};return Object(c.jsxs)("main",{children:[Object(c.jsx)("h1",{children:"Minesweeper"}),Object(c.jsx)(Q,{changeLevel:function(e){var n=e.target.value;b({type:T.CHANGE_LEVEL,payload:{level:d[n]}})},active:u.difficulty}),Object(c.jsx)(H,{nFlags:l,reset:f}),Object(c.jsxs)("section",{style:{position:"relative"},children:[o!==r.INPROGRESS&&Object(c.jsx)(J,{reset:f,state:o}),Object(c.jsx)(N,{})]})]})}var X=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(F,{initialState:O,reducer:Y,children:Object(c.jsx)(W,{})})})};l.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(X,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e8942d9e.chunk.js.map