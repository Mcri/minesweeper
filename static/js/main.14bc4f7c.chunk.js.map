{"version":3,"sources":["types/index.ts","constants/index.ts","helpers/boardSetup.ts","helpers/boardInteractions.ts","helpers/cellColors.ts","components/cell/cell.style.ts","state/actions.ts","components/cell/cell.component.tsx","providers/minesweeper.provider.tsx","state/reducer.ts","components/board/baoard.component.tsx","components/minesweeper/topbar/topbar.style.ts","components/minesweeper/topbar/topbar.component.tsx","components/minesweeper/messagebox/message.style.ts","components/minesweeper/messagebox/message.component.tsx","components/minesweeper/levels/levels.style.ts","components/minesweeper/levels/levels.component.tsx","components/minesweeper/minesweeper.component.tsx","App.tsx","index.tsx"],"names":["GameStatus","NEIGHBOURS","LEVELS","EASY","difficulty","rows","columns","mines","MEDIUM","HARD","INITIAL_GAME_STATE","level","status","INPROGRESS","board","nFlags","cellsLeft","COLORS","CAMP_COLORS","minesCoordinates","getRandomCoordinate","min","max","Math","floor","random","checkLimits","coords","col","row","buildBoard","nMines","y","push","x","hasMine","hasFlag","isRevealed","proximity","counter","cell","placeMines","c","defineMineProximity","showAllMines","updatedBoard","toggleFlag","showAndExpand","length","cols","revealCell","r","defineCellColor","CAMP_COLORS_PAIR","getCampColorsPair","styled","ActionType","div","props","color","bg","mineColor","memo","onLeftClick","onRightClick","round","onClick","onContextMenu","e","preventDefault","icon","faFlag","id","className","MinesweeperContext","createContext","MinesweeperProvider","children","reducer","initialState","useReducer","state","dispatch","Provider","value","action","type","BUILD_BOARD","REVEAL_CELLS","SET_FLAG","payload","SET_GAME_OVER","GAMEOVER","SET_VICTORY","VICTORY","RESET_GAME","CHANGE_LEVEL","Board","useContext","useCallback","placeFlag","map","style","display","StyledTopbar","section","GameTopbar","reset","StyledMessageContainer","MessageBox","message","StyledLevelsBar","Levels","changeLevel","active","Minesweeper","useEffect","resetGame","target","position","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.14bc4f7c.chunk.js","sourcesContent":["export type Coords = [x: number, y: number];\r\n\r\nexport enum GameStatus {\r\n  INPROGRESS,\r\n  GAMEOVER,\r\n  VICTORY,\r\n}\r\n\r\nexport type Level = {\r\n  difficulty: string;\r\n  rows: number;\r\n  columns: number;\r\n  mines: number;\r\n};\r\n\r\nexport type Cell = {\r\n  x: number;\r\n  y: number;\r\n  hasMine: boolean;\r\n  isRevealed: boolean;\r\n  hasFlag: boolean;\r\n  proximity: number;\r\n};\r\n\r\nexport type GameState = {\r\n  level: Level;\r\n  status: GameStatus;\r\n  board: Cell[][];\r\n  nFlags: number;\r\n  cellsLeft: number;\r\n};\r\n","import { Coords, GameState, GameStatus, Level } from \"../types\";\r\n\r\nexport const NEIGHBOURS: Coords[] = [\r\n  [-1, -1],\r\n  [0, -1],\r\n  [1, -1],\r\n  [-1, 0],\r\n  [1, 0],\r\n  [-1, 1],\r\n  [0, 1],\r\n  [1, 1],\r\n];\r\n\r\nexport const LEVELS: { [key: string]: Level } = {\r\n  EASY: {\r\n    difficulty: \"EASY\",\r\n    rows: 10,\r\n    columns: 10,\r\n    mines: 15,\r\n  },\r\n  MEDIUM: {\r\n    difficulty: \"MEDIUM\",\r\n    rows: 15,\r\n    columns: 15,\r\n    mines: 35,\r\n  },\r\n  HARD: {\r\n    difficulty: \"HARD\",\r\n    rows: 15,\r\n    columns: 15,\r\n    mines: 50,\r\n  },\r\n};\r\n\r\nexport const INITIAL_GAME_STATE: GameState = {\r\n  level: LEVELS.EASY,\r\n  status: GameStatus.INPROGRESS,\r\n  board: [],\r\n  nFlags: LEVELS.EASY.mines,\r\n  cellsLeft: LEVELS.EASY.rows * LEVELS.EASY.columns - LEVELS.EASY.mines,\r\n};\r\n\r\nexport const COLORS = [\r\n  \"rgb(45, 47, 163)\",\r\n  \"rgb(57, 128, 25)\",\r\n  \"rgb(211, 76, 22)\",\r\n  \"rgb(204, 19, 19)\",\r\n  \"rgb(156, 6, 56)\",\r\n];\r\n\r\nexport const CAMP_COLORS = {\r\n  LIGHTGREEN: \"rgb(170, 219, 124)\",\r\n  DARKGREEN: \"rgb(133, 201, 130)\",\r\n  LIGHTBROWN: \"rgb(180, 156, 125)\",\r\n  DARKBROWN: \"rgb(156, 138, 115)\",\r\n};\r\n","import { NEIGHBOURS } from \"../constants\";\r\nimport { Cell, Coords } from \"../types\";\r\n\r\nexport let minesCoordinates: Coords[] = [];\r\n\r\nfunction getRandomCoordinate(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nexport function checkLimits(\r\n  coords: Coords,\r\n  rows: number,\r\n  columns: number\r\n): boolean {\r\n  const [col, row] = coords;\r\n  return row >= 0 && row <= rows - 1 && col >= 0 && col <= columns - 1;\r\n}\r\n\r\nfunction defineMineProximity(\r\n  board: Cell[][],\r\n  rows: number,\r\n  columns: number\r\n): void {\r\n  for (let [x, y] of minesCoordinates) {\r\n    for (let [c, r] of NEIGHBOURS) {\r\n      const row = y + r;\r\n      const col = x + c;\r\n\r\n      if (checkLimits([col, row], rows, columns) && !board[row][col].hasMine) {\r\n        board[row][col].proximity++;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction placeMines(\r\n  nMines: number,\r\n  rows: number,\r\n  columns: number,\r\n  board: Cell[][]\r\n): void {\r\n  let counter = 0;\r\n\r\n  while (counter < nMines) {\r\n    let [x, y]: Coords = [\r\n      getRandomCoordinate(0, columns - 1),\r\n      getRandomCoordinate(0, rows - 1),\r\n    ];\r\n\r\n    let cell = board[y][x];\r\n    if (!cell.hasMine) {\r\n      cell.hasMine = true;\r\n      counter++;\r\n      minesCoordinates.push([x, y]);\r\n    }\r\n  }\r\n}\r\n\r\nexport function buildBoard(\r\n  nMines: number,\r\n  rows: number,\r\n  columns: number\r\n): Cell[][] {\r\n  minesCoordinates = [];\r\n  const board: Cell[][] = [];\r\n  for (let y = 0; y < rows; y++) {\r\n    board.push([]);\r\n    for (let x = 0; x < columns; x++)\r\n      board[y].push({\r\n        x,\r\n        y,\r\n        hasMine: false,\r\n        hasFlag: false,\r\n        isRevealed: false,\r\n        proximity: 0,\r\n      });\r\n  }\r\n  placeMines(nMines, rows, columns, board);\r\n  defineMineProximity(board, rows, columns);\r\n  return board;\r\n}\r\n","import { NEIGHBOURS } from \"../constants\";\r\nimport { Cell, Coords } from \"../types\";\r\nimport { checkLimits, minesCoordinates } from \"./boardSetup\";\r\n\r\nexport function showAllMines(board: Cell[][]): { board: Cell[][] } {\r\n  const updatedBoard = [...board];\r\n  for (let [x, y] of minesCoordinates) {\r\n    updatedBoard[y][x].isRevealed = true;\r\n  }\r\n  return { board: updatedBoard };\r\n}\r\n\r\nexport function toggleFlag([x, y]: Coords, board: Cell[][], nFlags: number) {\r\n  const updatedBoard = [...board];\r\n  const cell = updatedBoard[y][x];\r\n  if (cell.hasFlag) {\r\n    nFlags++;\r\n    cell.hasFlag = false;\r\n  } else if (nFlags > 0) {\r\n    nFlags--;\r\n    cell.hasFlag = true;\r\n  }\r\n  return { board: updatedBoard, nFlags };\r\n}\r\n\r\nexport function showAndExpand(\r\n  [x, y]: Coords,\r\n  board: Cell[][],\r\n  cellsLeft: number\r\n): { board: Cell[][]; cellsLeft: number } {\r\n  const rows = board.length;\r\n  const cols = board[0].length;\r\n  const updatedBoard = [...board];\r\n\r\n  const revealCell = (x: number, y: number) => {\r\n    const cell = updatedBoard[y][x];\r\n    if (cell.isRevealed || cell.hasFlag) return;\r\n    cell.isRevealed = true;\r\n    cellsLeft--;\r\n    if (cell.proximity > 0) return;\r\n\r\n    for (let [c, r] of NEIGHBOURS) {\r\n      c += x;\r\n      r += y;\r\n      if (checkLimits([c, r], rows, cols)) revealCell(c, r);\r\n    }\r\n  };\r\n  revealCell(x, y);\r\n\r\n  return { board: updatedBoard, cellsLeft };\r\n}\r\n","import { CAMP_COLORS } from \"../constants\";\r\n\r\nconst getCampColorsPair = (isRevealed: boolean): string[] => {\r\n  return isRevealed\r\n    ? [CAMP_COLORS.LIGHTBROWN, CAMP_COLORS.DARKBROWN]\r\n    : [CAMP_COLORS.LIGHTGREEN, CAMP_COLORS.DARKGREEN];\r\n};\r\n\r\nexport const defineCellColor = (\r\n  x: number,\r\n  y: number,\r\n  isRevealed: boolean\r\n): string => {\r\n  const CAMP_COLORS_PAIR = getCampColorsPair(isRevealed);\r\n  let bg: string;\r\n  if (y % 2 === 0) bg = x % 2 === 0 ? CAMP_COLORS_PAIR[0] : CAMP_COLORS_PAIR[1];\r\n  else bg = x % 2 === 0 ? CAMP_COLORS_PAIR[1] : CAMP_COLORS_PAIR[0];\r\n  return bg;\r\n};\r\n","import styled from \"styled-components\";\r\n\r\ntype StyledCellProp = {\r\n  bg: string;\r\n  color: string;\r\n  mineColor: string;\r\n  isRevealed: boolean;\r\n};\r\n\r\nexport default styled.div<StyledCellProp>`\r\n  width: 35px;\r\n  height: 35px;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  color: ${(props) => props.color};\r\n  background-color: ${(props) => props.bg};\r\n  \r\n  > svg#flag {\r\n    color: rgb(204, 19, 19);\r\n  }\r\n  > .mine {\r\n    width: 50%;\r\n    height: 50%;\r\n    border-radius: 50%;\r\n    background: ${(props) => props.mineColor};\r\n    filter: drop-shadow(0 0.6mm 0.2mm rgba(0,0,0,0.5))\r\n  }\r\n  ::after {\r\n    content: \"\";\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n  }\r\n  :hover::after {\r\n    background-color: ${(props) =>\r\n      !props.isRevealed && \"rgba(255, 255, 255, 0.253)\"};\r\n  }\r\n`;\r\n","import { Cell, Level } from \"../types\";\r\n\r\nexport enum ActionType {\r\n  BUILD_BOARD,\r\n  RESET_GAME,\r\n  SET_GAME_OVER,\r\n  SET_VICTORY,\r\n  SET_FLAG,\r\n  REVEAL_CELLS,\r\n  CHANGE_LEVEL,\r\n}\r\n\r\ninterface RevealCellsAction {\r\n  type: ActionType.REVEAL_CELLS;\r\n  payload: {\r\n    board: Cell[][];\r\n    cellsLeft: number;\r\n  };\r\n}\r\n\r\ninterface SetFlagAction {\r\n  type: ActionType.SET_FLAG;\r\n  payload: {\r\n    board: Cell[][];\r\n    nFlags: number;\r\n  };\r\n}\r\n\r\ninterface SetGameOverAction {\r\n  type: ActionType.SET_GAME_OVER;\r\n  payload: {\r\n    board: Cell[][];\r\n  };\r\n}\r\n\r\ninterface SetVictoryAction {\r\n  type: ActionType.SET_VICTORY;\r\n}\r\n\r\ninterface ResetGameAction {\r\n  type: ActionType.RESET_GAME;\r\n}\r\n\r\ninterface ChangeLevelAction {\r\n  type: ActionType.CHANGE_LEVEL;\r\n  payload: {\r\n    level: Level;\r\n  };\r\n}\r\n\r\ninterface BuildBoardAction {\r\n  type: ActionType.BUILD_BOARD;\r\n}\r\n\r\nexport type GameAction =\r\n  | RevealCellsAction\r\n  | SetFlagAction\r\n  | SetVictoryAction\r\n  | SetGameOverAction\r\n  | ResetGameAction\r\n  | ChangeLevelAction\r\n  | BuildBoardAction;\r\n","import React, { memo } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFlag } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { COLORS } from \"../../constants\";\r\nimport { defineCellColor } from \"../../helpers\";\r\nimport StyledCell from \"./cell.style\";\r\n\r\ntype CellProps = {\r\n  x: number;\r\n  y: number;\r\n  isRevealed: boolean;\r\n  hasFlag: boolean;\r\n  hasMine: boolean;\r\n  proximity: number;\r\n  onLeftClick: (row: number, column: number) => void;\r\n  onRightClick: (row: number, column: number) => void;\r\n};\r\n\r\nexport default memo(function Cell({\r\n  x,\r\n  y,\r\n  isRevealed,\r\n  hasFlag,\r\n  hasMine,\r\n  proximity,\r\n  onLeftClick,\r\n  onRightClick,\r\n}: CellProps) {\r\n  const bg = defineCellColor(x, y, isRevealed);\r\n\r\n  const mineColor = COLORS[Math.round(Math.random() * (COLORS.length - 1))];\r\n\r\n  const handleLeftClick = () => {\r\n    onLeftClick(y, x);\r\n  };\r\n\r\n  const handleRightClick = (\r\n    e: React.MouseEvent<HTMLDivElement, MouseEvent>\r\n  ) => {\r\n    e.preventDefault();\r\n    onRightClick(y, x);\r\n  };\r\n\r\n  return (\r\n    <StyledCell\r\n      bg={bg}\r\n      color={COLORS[proximity]}\r\n      mineColor={mineColor}\r\n      isRevealed={isRevealed}\r\n      onClick={handleLeftClick}\r\n      onContextMenu={handleRightClick}\r\n    >\r\n      {hasFlag && !isRevealed && <FontAwesomeIcon icon={faFlag} id=\"flag\" />}\r\n      {hasMine && isRevealed && <div className=\"mine\"></div>}\r\n      {isRevealed && proximity > 0 && <p>{proximity}</p>}\r\n    </StyledCell>\r\n  );\r\n});\r\n","import React, { createContext, ReactNode, useReducer } from \"react\";\r\nimport { INITIAL_GAME_STATE } from \"../constants\";\r\nimport { GameAction } from \"../state/actions\";\r\nimport { GameState } from \"../types\";\r\n\r\nexport const MinesweeperContext = createContext<\r\n  [GameState, React.Dispatch<GameAction>]\r\n>([INITIAL_GAME_STATE, () => null]);\r\n\r\nexport type Props = {\r\n  children: ReactNode;\r\n  initialState: GameState;\r\n  reducer: (state: GameState, action: GameAction) => GameState;\r\n};\r\n\r\nexport const MinesweeperProvider = ({\r\n  children,\r\n  reducer,\r\n  initialState,\r\n}: Props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  return (\r\n    <MinesweeperContext.Provider value={[state, dispatch]}>\r\n      {children}\r\n    </MinesweeperContext.Provider>\r\n  );\r\n};\r\n","import { GameState, GameStatus } from \"../types\";\r\nimport { GameAction, ActionType } from \"./actions\";\r\nimport { buildBoard } from \"../helpers\";\r\n\r\nexport const reducer = (state: GameState, action: GameAction): GameState => {\r\n  switch (action.type) {\r\n    case ActionType.BUILD_BOARD:\r\n      return {\r\n        ...state,\r\n        board: buildBoard(\r\n          state.level.mines,\r\n          state.level.rows,\r\n          state.level.columns\r\n        ),\r\n      };\r\n    case ActionType.REVEAL_CELLS:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.SET_FLAG:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.SET_GAME_OVER:\r\n      return {\r\n        ...state,\r\n        status: GameStatus.GAMEOVER,\r\n        ...action.payload,\r\n      };\r\n    case ActionType.SET_VICTORY:\r\n      return {\r\n        ...state,\r\n        status: GameStatus.VICTORY,\r\n      };\r\n    case ActionType.RESET_GAME:\r\n      return {\r\n        ...state,\r\n        status: GameStatus.INPROGRESS,\r\n        board: buildBoard(\r\n          state.level.mines,\r\n          state.level.rows,\r\n          state.level.columns\r\n        ),\r\n        cellsLeft: state.level.columns * state.level.rows - state.level.mines,\r\n        nFlags: state.level.mines,\r\n      };\r\n    case ActionType.CHANGE_LEVEL:\r\n      const { level } = action.payload;\r\n      return {\r\n        ...state,\r\n        status: GameStatus.INPROGRESS,\r\n        level: level,\r\n        board: buildBoard(level.mines, level.rows, level.columns),\r\n        cellsLeft: level.columns * level.rows - level.mines,\r\n        nFlags: level.mines,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { useCallback, useContext } from \"react\";\r\nimport CellView from \"../cell/cell.component\";\r\nimport { MinesweeperContext } from \"../../providers\";\r\nimport { GameStatus } from \"../../types\";\r\nimport { showAllMines, showAndExpand, toggleFlag } from \"../../helpers\";\r\nimport { ActionType } from \"../../state\";\r\n\r\nexport default function Board() {\r\n  const [{ board, status, cellsLeft, level, nFlags }, dispatch] = useContext(\r\n    MinesweeperContext\r\n  );\r\n\r\n  const revealCell = useCallback(\r\n    (row: number, col: number): void => {\r\n      if (status === GameStatus.INPROGRESS) {\r\n        const cell = board[row][col];\r\n        if (cell.hasMine) {\r\n          dispatch({\r\n            type: ActionType.SET_GAME_OVER,\r\n            payload: showAllMines(board),\r\n          });\r\n          return;\r\n        }\r\n        dispatch({\r\n          type: ActionType.REVEAL_CELLS,\r\n          payload: showAndExpand([col, row], board, cellsLeft),\r\n        });\r\n      }\r\n    },\r\n    [board, cellsLeft, dispatch, status]\r\n  );\r\n\r\n  const placeFlag = useCallback(\r\n    (row: number, col: number) => {\r\n      if (status === GameStatus.INPROGRESS && nFlags <= level.mines) {\r\n        dispatch({\r\n          type: ActionType.SET_FLAG,\r\n          payload: toggleFlag([col, row], board, nFlags),\r\n        });\r\n      }\r\n    },\r\n    [board, dispatch, level.mines, nFlags, status]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {board.map((row, y) => (\r\n        <div key={`row-${y}`} style={{ display: \"flex\" }}>\r\n          {row.map((cell, x) => (\r\n            <CellView\r\n              key={`col-${x}`}\r\n              {...cell}\r\n              onLeftClick={revealCell}\r\n              onRightClick={placeFlag}\r\n            />\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledTopbar = styled.section`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  text-transform: uppercase;\r\n  font-weight: 600;\r\n  margin-bottom: 10px;\r\n  color: rgb(133, 201, 130);\r\n  svg#flag {\r\n    color: rgb(204, 19, 19);\r\n  }\r\n  > #restart:hover {\r\n    text-decoration: underline;\r\n    color: rgb(207, 203, 56);\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { StyledTopbar } from \"./topbar.style\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFlag } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\ntype GameTopbarProps = {\r\n  nFlags: number;\r\n  reset: () => void;\r\n};\r\n\r\nexport function GameTopbar({ nFlags, reset }: GameTopbarProps) {\r\n  return (\r\n    <StyledTopbar>\r\n      <span>\r\n        <FontAwesomeIcon icon={faFlag} id=\"flag\" /> {nFlags}\r\n      </span>\r\n      <span id=\"restart\" onClick={reset}>\r\n        RESTART\r\n      </span>\r\n    </StyledTopbar>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledMessageContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  position: absolute;\r\n  flex-direction: column;\r\n  z-index: 300;\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  width: 100%;\r\n  height: 100%;\r\n  bottom: 0;\r\n  h2 {\r\n    display: block;\r\n    font-size: 3rem;\r\n    color: rgb(56, 82, 62);\r\n    margin-bottom: 10px;\r\n  }\r\n  button {\r\n    text-transform: uppercase;\r\n    padding: 10px 20px;\r\n    font-size: 1.1rem;\r\n    border: none;\r\n    background-color: rgb(207, 203, 56);\r\n    color: white;\r\n    :hover {\r\n      background-color: rgb(201, 197, 24);\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { GameStatus } from \"../../../types\";\r\nimport { StyledMessageContainer } from \"./message.style\";\r\n\r\ntype MessageBoxProps = {\r\n  state: GameStatus;\r\n  reset: () => void;\r\n};\r\n\r\nexport function MessageBox({ state, reset }: MessageBoxProps) {\r\n  const message = (() => {\r\n    if (state === GameStatus.GAMEOVER) return \"GAME OVER\";\r\n    if (state === GameStatus.VICTORY) return \"VICTORY\";\r\n  })();\r\n  return (\r\n    <StyledMessageContainer>\r\n      <h2>{message}</h2>\r\n      <button onClick={reset}>Play again</button>\r\n    </StyledMessageContainer>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const StyledLevelsBar = styled.section`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 10px;\r\n  button {\r\n    padding: 5px 0;\r\n    color: #ccc;\r\n    font-weight: 700;\r\n    border: 1px solid #ccc;\r\n    flex-grow: 1;\r\n    outline: none;\r\n    background: none;\r\n    :hover {\r\n      color: rgb(207, 203, 56);\r\n    };\r\n    &.active {\r\n      background-color: rgb(56, 82, 62);\r\n      color: white;\r\n      border: none;\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { StyledLevelsBar } from \"./levels.style\";\r\n\r\ntype LevelsProps = {\r\n  changeLevel: (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n  active: string;\r\n};\r\n\r\nexport function Levels({ changeLevel, active }: LevelsProps) {\r\n  return (\r\n    <StyledLevelsBar>\r\n      <button\r\n        onClick={changeLevel}\r\n        value=\"EASY\"\r\n        className={active === \"EASY\" ? \"active\" : \"\"}\r\n      >\r\n        EASY\r\n      </button>\r\n      <button\r\n        onClick={changeLevel}\r\n        value=\"MEDIUM\"\r\n        className={active === \"MEDIUM\" ? \"active\" : \"\"}\r\n      >\r\n        MEDIUM\r\n      </button>\r\n      <button\r\n        onClick={changeLevel}\r\n        value=\"HARD\"\r\n        className={active === \"HARD\" ? \"active\" : \"\"}\r\n      >\r\n        HARD\r\n      </button>\r\n    </StyledLevelsBar>\r\n  );\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport Board from \"../board/baoard.component\";\r\nimport { GameTopbar } from \"./topbar/topbar.component\";\r\nimport { MessageBox } from \"./messagebox/message.component\";\r\nimport { Levels } from \"./levels/levels.component\";\r\nimport { GameStatus } from \"../../types\";\r\nimport { MinesweeperContext } from \"../../providers\";\r\nimport { ActionType } from \"../../state\";\r\n\r\nimport { LEVELS } from \"../../constants\";\r\n\r\nexport default function Minesweeper() {\r\n  const [{ status, cellsLeft, nFlags, level }, dispatch] = useContext(\r\n    MinesweeperContext\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: ActionType.BUILD_BOARD });\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (cellsLeft === 0) dispatch({ type: ActionType.SET_VICTORY });\r\n  }, [dispatch, cellsLeft]);\r\n\r\n  const resetGame = (): void => {\r\n    dispatch({ type: ActionType.RESET_GAME });\r\n  };\r\n\r\n  const changeLevel = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    const value = (e.target as HTMLButtonElement).value;\r\n    dispatch({\r\n      type: ActionType.CHANGE_LEVEL,\r\n      payload: { level: LEVELS[value] },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <h1>Minesweeper</h1>\r\n      <Levels changeLevel={changeLevel} active={level.difficulty} />\r\n      <GameTopbar nFlags={nFlags} reset={resetGame} />\r\n      <section style={{ position: \"relative\" }}>\r\n        {status !== GameStatus.INPROGRESS && (\r\n          <MessageBox reset={resetGame} state={status} />\r\n        )}\r\n        <Board />\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Minesweeper from \"./components/minesweeper/minesweeper.component\";\r\nimport { MinesweeperProvider } from \"./providers\";\r\nimport { reducer } from \"./state\";\r\nimport { INITIAL_GAME_STATE } from \"./constants\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <MinesweeperProvider initialState={INITIAL_GAME_STATE} reducer={reducer}>\r\n        <Minesweeper />\r\n      </MinesweeperProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}