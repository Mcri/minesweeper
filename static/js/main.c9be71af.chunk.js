(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{29:function(n,e,t){},35:function(n,e,t){"use strict";t.r(e);var i,r=t(1),o=t(0),c=t.n(o),a=t(20),s=t.n(a),l=(t(29),t(7)),u=t(3),b=t(4),d=t(11),f=t(12),h=function(){function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(d.a)(this,n),this.x=e,this.y=t,this.hasMine=i,this.isRevealed=r,this.hasFlag=o,this.proximity=c}return Object(f.a)(n,[{key:"reveal",value:function(){this.isRevealed=!0}},{key:"toggleFlag",value:function(){this.hasFlag=!this.hasFlag}}]),n}(),v=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];!function(n){n[n.INPROGRESS=0]="INPROGRESS",n[n.GAMEOVER=1]="GAMEOVER",n[n.VICTORY=2]="VICTORY"}(i||(i={}));var j={EASY:{difficulty:"EASY",rows:10,columns:10,mines:15},MEDIUM:{difficulty:"MEDIUM",rows:15,columns:15,mines:35},HARD:{difficulty:"HARD",rows:15,columns:15,mines:50}},g=["#2d2fa3","rgb(57, 128, 25)","rgb(211, 76, 22)","rgb(204, 19, 19)","rgb(156, 6, 56)"],O="rgb(170, 219, 124)",m="rgb(133, 201, 130)",x="rgb(180, 156, 125)",p="rgb(156, 138, 115)",R=function(){function n(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Object(d.a)(this,n),this.rows=e,this.columns=t,this.nMines=i,this.field=r,this.minesCoordinates=o,this.buildBoard()}return Object(f.a)(n,[{key:"_getRandomCoordinate",value:function(n,e){return Math.floor(Math.random()*(e-n+1))+n}},{key:"checkLimits",value:function(n,e){return n>=0&&n<=this.rows-1&&e>=0&&e<=this.columns-1}},{key:"_defineMineProximity",value:function(){var n,e=Object(l.a)(this.minesCoordinates);try{for(e.s();!(n=e.n()).done;){var t,i=Object(b.a)(n.value,2),r=i[0],o=i[1],c=Object(l.a)(v);try{for(c.s();!(t=c.n()).done;){var a=Object(b.a)(t.value,2),s=a[0],u=o+a[1],d=r+s;this.checkLimits(u,d)&&!this.field[u][d].hasMine&&this.field[u][d].proximity++}}catch(f){c.e(f)}finally{c.f()}}}catch(f){e.e(f)}finally{e.f()}}},{key:"_placeMines",value:function(){for(var n=0;n<this.nMines;){var e=[this._getRandomCoordinate(0,this.columns-1),this._getRandomCoordinate(0,this.rows-1)],t=e[0],i=e[1],r=this.field[i][t];r.hasMine||(r.hasMine=!0,n++,this.minesCoordinates.push([t,i]))}this._defineMineProximity()}},{key:"buildBoard",value:function(){this.field=[];for(var n=0;n<this.rows;n++){this.field.push([]);for(var e=0;e<this.columns;e++)this.field[n].push(new h(e,n))}this._placeMines()}},{key:"showAllMines",value:function(){var n,e=Object(l.a)(this.minesCoordinates);try{for(e.s();!(n=e.n()).done;){var t=Object(b.a)(n.value,2),i=t[0],r=t[1];this.field[r][i].reveal()}}catch(o){e.e(o)}finally{e.f()}}}]),n}(),y=t(8),E=t(9),w=t(5),M=t(6);function k(){var n=Object(w.a)(["\n  width: 35px;\n  height: 35px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 600;\n  color: ",";\n  background-color: ",";\n  \n  > svg#flag {\n    color: rgb(204, 19, 19);\n  }\n  > svg {\n    color: ",';\n    font-size: 1.2rem;\n  }\n  ::after {\n    content: "";\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    right: 0;\n  }\n  :hover::after {\n    background-color: ',";\n  }\n"]);return k=function(){return n},n}var S=M.a.div(k(),(function(n){return n.color}),(function(n){return n.bg}),(function(n){return n.mineColor}),(function(n){return!n.isRevealed&&"rgba(255, 255, 255, 0.253)"})),A=Object(o.memo)((function(n){var e=n.x,t=n.y,i=n.isRevealed,o=n.hasFlag,c=n.hasMine,a=n.proximity,s=n.onLeftClick,l=n.onRightClick,u=function(){var n=function(n){return n?[x,p]:[O,m]}(i);return t%2===0?e%2===0?n[0]:n[1]:e%2===0?n[1]:n[0]}(),b=g[Math.round(Math.random()*g.length)];return Object(r.jsxs)(S,{bg:u,color:g[a],mineColor:b,isRevealed:i,onClick:function(){s(t,e)},onContextMenu:function(n){n.preventDefault(),l(t,e)},children:[o&&!i&&Object(r.jsx)(y.a,{icon:E.b,id:"flag"}),c&&i&&Object(r.jsx)(y.a,{icon:E.a}),i&&a>0&&Object(r.jsx)("p",{children:a})]})}));function C(n){var e=n.field,t=n.showAndExpand,i=n.toggleFlag;return Object(r.jsx)("div",{children:e.map((function(n,e){return Object(r.jsx)("div",{style:{display:"flex"},children:n.map((function(n,e){return Object(r.jsx)(A,Object(u.a)(Object(u.a)({},n),{},{onLeftClick:t,onRightClick:i}),"col-".concat(e))}))},"row-".concat(e))}))})}function I(){var n=Object(w.a)(["\n  display: flex;\n  justify-content: space-between;\n  text-transform: uppercase;\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: rgb(133, 201, 130);\n  svg#flag {\n    color: rgb(204, 19, 19);\n  }\n  > #restart:hover {\n    text-decoration: underline;\n    color: rgb(207, 203, 56);\n  }\n"]);return I=function(){return n},n}var Y=M.a.section(I());function F(n){var e=n.nFlags,t=n.reset;return Object(r.jsxs)(Y,{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)(y.a,{icon:E.b,id:"flag"})," ",e]}),Object(r.jsx)("span",{id:"restart",onClick:t,children:"RESTART"})]})}function G(){var n=Object(w.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  position: absolute;\n  flex-direction: column;\n  z-index: 300;\n  background-color: rgba(255, 255, 255, 0.2);\n  width: 100%;\n  height: 100%;\n  bottom: 0;\n  h2 {\n    display: block;\n    font-size: 3rem;\n    color: rgb(56, 82, 62);\n    margin-bottom: 10px;\n  }\n  button {\n    text-transform: uppercase;\n    padding: 10px 20px;\n    font-size: 1.1rem;\n    border: none;\n    background-color: rgb(207, 203, 56);\n    color: white;\n    :hover {\n      background-color: rgb(201, 197, 24);\n    }\n  }\n"]);return G=function(){return n},n}var N=M.a.div(G());function D(n){var e=n.state,t=n.reset,o=e===i.GAMEOVER?"GAME OVER":e===i.VICTORY?"VICTORY":void 0;return Object(r.jsxs)(N,{children:[Object(r.jsx)("h2",{children:o}),Object(r.jsx)("button",{onClick:t,children:"Play again"})]})}function P(){var n=Object(w.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  button {\n    padding: 5px 0;\n    color: #ccc;\n    font-weight: 700;\n    border: 1px solid #ccc;\n    flex-grow: 1;\n    outline: none;\n    background: none;\n    :hover {\n      color: rgb(207, 203, 56);\n    };\n    &.active {\n      background-color: rgb(56, 82, 62);\n      color: white;\n      border: none;\n    }\n  }\n"]);return P=function(){return n},n}var V=M.a.section(P());function L(n){var e=n.changeLevel,t=n.active;return Object(r.jsxs)(V,{children:[Object(r.jsx)("button",{onClick:e,value:"EASY",className:"EASY"===t?"active":"",children:"EASY"}),Object(r.jsx)("button",{onClick:e,value:"MEDIUM",className:"MEDIUM"===t?"active":"",children:"MEDIUM"}),Object(r.jsx)("button",{onClick:e,value:"HARD",className:"HARD"===t?"active":"",children:"HARD"})]})}function T(){var n=Object(o.useState)({level:j.EASY,status:i.INPROGRESS,board:new R(j.EASY.rows,j.EASY.columns,j.EASY.mines)}),e=Object(b.a)(n,2),t=e[0],c=e[1],a=Object(o.useState)(j.EASY.rows*j.EASY.columns-j.EASY.mines),s=Object(b.a)(a,2),d=s[0],f=s[1],h=Object(o.useState)(0),g=Object(b.a)(h,2),O=g[0],m=g[1];Object(o.useEffect)((function(){t.status===i.INPROGRESS&&(f(t.level.rows*t.level.columns-t.level.mines),m(0))}),[t]),Object(o.useEffect)((function(){0===d&&c((function(n){return Object(u.a)(Object(u.a)({},n),{},{status:i.VICTORY})}))}),[d]);var x=Object(o.useCallback)((function(n,e){var r=t.board.field[n][e];if(!r.isRevealed&&!r.hasFlag){if(r.hasMine)return t.board.showAllMines(),void c((function(n){return Object(u.a)(Object(u.a)({},n),{},{status:i.GAMEOVER})}));if(r.reveal(),f((function(n){return n-1})),!(r.proximity>0)){var o,a=Object(l.a)(v);try{for(a.s();!(o=a.n()).done;){var s=Object(b.a)(o.value,2),d=s[0],h=s[1];d+=e,h+=n,t.board.checkLimits(h,d)&&x(h,d)}}catch(j){a.e(j)}finally{a.f()}}}}),[t.board]),p=Object(o.useCallback)((function(n,e){if(t.status===i.INPROGRESS){var r=t.board.field[n][e];r.hasFlag?(m((function(n){return n-1})),r.toggleFlag()):O<t.level.mines&&(m((function(n){return n+1})),r.toggleFlag())}}),[t.board.field,t.level.mines,t.status,O]),y=function(){c((function(n){return Object(u.a)(Object(u.a)({},n),{},{status:i.INPROGRESS,board:new R(n.level.rows,n.level.columns,n.level.mines)})}))};return Object(r.jsxs)("main",{children:[Object(r.jsx)("h1",{children:"Minesweeper"}),Object(r.jsx)(L,{changeLevel:function(n){var e=n.target.value,t=j[e];c({level:t,status:i.INPROGRESS,board:new R(t.rows,t.columns,t.mines)})},active:t.level.difficulty}),Object(r.jsx)(F,{nFlags:t.level.mines-O,reset:y}),Object(r.jsxs)("section",{style:{position:"relative"},children:[t.status!==i.INPROGRESS&&Object(r.jsx)(D,{reset:y,state:t.status}),Object(r.jsx)(C,Object(u.a)(Object(u.a)({},t.board),{},{showAndExpand:x,toggleFlag:p}))]})]})}var _=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(T,{})})};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(_,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.c9be71af.chunk.js.map